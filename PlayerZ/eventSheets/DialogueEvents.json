{
	"name": "DialogueEvents",
	"events": [
		{
			"eventType": "variable",
			"name": "Dialogue_IsRunning",
			"type": "boolean",
			"initialValue": "false",
			"comment": "",
			"isStatic": false,
			"isConstant": false,
			"sid": 197466035738430
		},
		{
			"eventType": "variable",
			"name": "Dialogue_WaitForInput",
			"type": "number",
			"initialValue": "0",
			"comment": "",
			"isStatic": false,
			"isConstant": false,
			"sid": 906511984791108
		},
		{
			"eventType": "variable",
			"name": "Dialogue_WaitForChoice",
			"type": "number",
			"initialValue": "0",
			"comment": "",
			"isStatic": false,
			"isConstant": false,
			"sid": 545371681582887
		},
		{
			"eventType": "comment",
			"text": "This global dictate how the \"choices\" are selected. Change it to 1 to have choices selected using a tap gesture, otherwise it's a normal selection with cursor \"movement\" callbacks initiated by the method of your choice (keyboard, gamepad...)"
		},
		{
			"eventType": "variable",
			"name": "Dialogue_TapChoice",
			"type": "number",
			"initialValue": "0",
			"comment": "",
			"isStatic": false,
			"isConstant": false,
			"sid": 688702361820219
		},
		{
			"eventType": "comment",
			"text": "DialogueData array format :\r\nOne sequence of a dialogue per row (X axis)\r\nEach row are comprised of these columns (Y axis) :\r\n-Raw sequence text (string)\r\n-Portrait position (integer)\r\n-Portrait animation name (string)\r\n-Portrait X offset (integer)\r\n-Portrait Y offset (integer)\r\n-Portrait mirrored (0 or 1)\r\n-Window frame invisibility (0 or 1)\r\n\r\nTo add a dynamic variable inside a sequence use this syntax : {#Key}\r\nTo add a special command inside a sequence use this syntax : {commandName:parameter1,parameter2,...}\r\n"
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "DialogueSystem",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "Most of these values can changed for your particular needs without breaking anything"
				},
				{
					"eventType": "variable",
					"name": "DIALOGUE_POSITIONX",
					"type": "number",
					"initialValue": "160",
					"comment": "Dialogue box X position",
					"isStatic": true,
					"isConstant": false,
					"sid": 926188432211175
				},
				{
					"eventType": "variable",
					"name": "DIALOGUE_POSITIONY",
					"type": "number",
					"initialValue": "448",
					"comment": "Dialogue box Y position",
					"isStatic": true,
					"isConstant": false,
					"sid": 345126917476077
				},
				{
					"eventType": "variable",
					"name": "DIALOGUE_WIDTH",
					"type": "number",
					"initialValue": "480",
					"comment": "Dialogue box width",
					"isStatic": true,
					"isConstant": false,
					"sid": 813516110799904
				},
				{
					"eventType": "variable",
					"name": "DIALOGUE_HEIGHT",
					"type": "number",
					"initialValue": "128",
					"comment": "Dialogue box height",
					"isStatic": true,
					"isConstant": false,
					"sid": 481561567187831
				},
				{
					"eventType": "variable",
					"name": "DIALOGUE_DEFAULTDELAY",
					"type": "number",
					"initialValue": "15",
					"comment": "Default time in ms between each letters",
					"isStatic": true,
					"isConstant": false,
					"sid": 744612551532383
				},
				{
					"eventType": "variable",
					"name": "DIALOGUE_MARGIN",
					"type": "number",
					"initialValue": "16",
					"comment": "Inside margin of dialogue box, and portrait spacing",
					"isStatic": true,
					"isConstant": true,
					"sid": 579291083468383
				},
				{
					"eventType": "variable",
					"name": "DIALOGUE_PORTRAITWIDTH",
					"type": "number",
					"initialValue": "96",
					"comment": "Portrait will shift text by this number of pixels",
					"isStatic": true,
					"isConstant": true,
					"sid": 505430845146179
				},
				{
					"eventType": "variable",
					"name": "DIALOGUE_LINEHEIGHT",
					"type": "number",
					"initialValue": "18",
					"comment": "Adjust this value to character height + line spacing",
					"isStatic": true,
					"isConstant": true,
					"sid": 777656137134072
				},
				{
					"eventType": "variable",
					"name": "DIALOGUE_ARROWSIZE",
					"type": "number",
					"initialValue": "16",
					"comment": "Size of the arrow sprite that indicate more choice below or above",
					"isStatic": true,
					"isConstant": true,
					"sid": 840729383856826
				},
				{
					"eventType": "variable",
					"name": "DIALOGUE_REGEX_WORDS",
					"type": "string",
					"initialValue": "\\{.+?\\}|-*[^-\\s\\{\\}]+-*|\\s+",
					"comment": "Used for text processing (Adjust if you know what you're doing)",
					"isStatic": true,
					"isConstant": true,
					"sid": 953758289421874
				},
				{
					"eventType": "variable",
					"name": "DIALOGUE_REGEX_VARIABLES",
					"type": "string",
					"initialValue": "\\{#.+?\\}",
					"comment": "Used for inserting variables in text (Adjust if you know what you're doing)",
					"isStatic": true,
					"isConstant": true,
					"sid": 762482887249308
				},
				{
					"eventType": "variable",
					"name": "DIALOGUE_REGEX_BRACES",
					"type": "string",
					"initialValue": "\\{.+?\\}",
					"comment": "Used for special commands (Adjust if you know what you're doing)",
					"isStatic": true,
					"isConstant": true,
					"sid": 405289782908750
				},
				{
					"eventType": "variable",
					"name": "DIALOGUE_LAYER",
					"type": "string",
					"initialValue": "Dialogue",
					"comment": "Layer on which created objects will appear",
					"isStatic": true,
					"isConstant": true,
					"sid": 252713292818939
				},
				{
					"eventType": "comment",
					"text": "Internal, don't bother with these"
				},
				{
					"eventType": "variable",
					"name": "Dialogue_WindowFrameUID",
					"type": "number",
					"initialValue": "0",
					"comment": "Internal, don't change anything",
					"isStatic": true,
					"isConstant": false,
					"sid": 718547058927548
				},
				{
					"eventType": "variable",
					"name": "Dialogue_SpriteFontUID",
					"type": "number",
					"initialValue": "0",
					"comment": "Internal, don't change anything",
					"isStatic": true,
					"isConstant": false,
					"sid": 910792805123309
				},
				{
					"eventType": "variable",
					"name": "Dialogue_PortraitUID",
					"type": "number",
					"initialValue": "0",
					"comment": "Internal, don't change anything",
					"isStatic": true,
					"isConstant": false,
					"sid": 619240751849640
				},
				{
					"eventType": "variable",
					"name": "Dialogue_SequenceIndex",
					"type": "number",
					"initialValue": "-1",
					"comment": "Internal, don't change anything",
					"isStatic": true,
					"isConstant": false,
					"sid": 900555201446432
				},
				{
					"eventType": "variable",
					"name": "Dialogue_ChoiceIndex",
					"type": "number",
					"initialValue": "0",
					"comment": "Internal, don't change anything",
					"isStatic": true,
					"isConstant": false,
					"sid": 249671943407727
				},
				{
					"eventType": "variable",
					"name": "Dialogue_ProcessedText",
					"type": "string",
					"initialValue": "",
					"comment": "Internal, don't change anything",
					"isStatic": true,
					"isConstant": false,
					"sid": 867230957555585
				},
				{
					"eventType": "variable",
					"name": "Dialogue_SequenceCharDelay",
					"type": "number",
					"initialValue": "0",
					"comment": "Internal, don't change anything",
					"isStatic": true,
					"isConstant": false,
					"sid": 476760809824438
				},
				{
					"eventType": "variable",
					"name": "Dialogue_Timer",
					"type": "number",
					"initialValue": "0",
					"comment": "Internal, don't change anything",
					"isStatic": true,
					"isConstant": false,
					"sid": 467632241150598
				},
				{
					"eventType": "variable",
					"name": "Dialogue_LineNumber",
					"type": "number",
					"initialValue": "0",
					"comment": "Internal, don't change anything",
					"isStatic": true,
					"isConstant": false,
					"sid": 958698694856250
				},
				{
					"eventType": "variable",
					"name": "Dialogue_StartCharIndex",
					"type": "number",
					"initialValue": "0",
					"comment": "Internal, don't change anything",
					"isStatic": true,
					"isConstant": false,
					"sid": 210218334769285
				},
				{
					"eventType": "variable",
					"name": "Dialogue_CharIndex",
					"type": "number",
					"initialValue": "0",
					"comment": "Internal, don't change anything",
					"isStatic": true,
					"isConstant": false,
					"sid": 777145133793100
				},
				{
					"eventType": "variable",
					"name": "Dialogue_TextOverflow",
					"type": "number",
					"initialValue": "0",
					"comment": "Internal, don't change anything",
					"isStatic": true,
					"isConstant": false,
					"sid": 431615928953510
				},
				{
					"eventType": "variable",
					"name": "Dialogue_CommandNumber",
					"type": "number",
					"initialValue": "0",
					"comment": "Internal, don't change anything",
					"isStatic": true,
					"isConstant": false,
					"sid": 989306295332071
				},
				{
					"eventType": "variable",
					"name": "Dialogue_SkipSequence",
					"type": "number",
					"initialValue": "0",
					"comment": "Internal, don't change anything",
					"isStatic": true,
					"isConstant": false,
					"sid": 163738623363698
				},
				{
					"eventType": "variable",
					"name": "Dialogue_OpeningBBTagsPattern",
					"type": "string",
					"initialValue": "^\\[(((?:scalex)|(?:scaley)|(?:scale)|(?:color)|(?:opacity)|(?:background)|(?:offsetx)|(?:offsety))=.+?)\\]",
					"comment": "Internal, don't change anything",
					"isStatic": true,
					"isConstant": true,
					"sid": 855835171428704
				},
				{
					"eventType": "variable",
					"name": "Dialogue_ClosingBBTagsPattern",
					"type": "string",
					"initialValue": "^\\[\\/((?:scalex)|(?:scaley)|(?:scale)|(?:color)|(?:opacity)|(?:background)|(?:offsetx)|(?:offsety))\\]",
					"comment": "Internal, don't change anything",
					"isStatic": true,
					"isConstant": true,
					"sid": 918560685181456
				},
				{
					"eventType": "variable",
					"name": "Dialogue_AnyBBTagsPattern",
					"type": "string",
					"initialValue": "\\[\\/?(((?:scalex)|(?:scaley)|(?:scale)|(?:color)|(?:opacity)|(?:background)|(?:offsetx)|(?:offsety))(?:=.+?)?)\\]",
					"comment": "Internal, don't change anything",
					"isStatic": true,
					"isConstant": true,
					"sid": 522592693307594
				},
				{
					"eventType": "variable",
					"name": "Dialogue_CurrentTags",
					"type": "string",
					"initialValue": "",
					"comment": "",
					"isStatic": true,
					"isConstant": false,
					"sid": 440475181742047
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-start-of-layout",
							"objectClass": "System",
							"sid": 331460648417311
						}
					],
					"actions": [
						{
							"id": "destroy",
							"objectClass": "WindowFrame",
							"sid": 136407026054414
						},
						{
							"id": "destroy",
							"objectClass": "SpriteFont",
							"sid": 141816090009068
						},
						{
							"id": "destroy",
							"objectClass": "PortraitSprite",
							"sid": 671573739387806
						},
						{
							"id": "destroy",
							"objectClass": "ContinueIndicator",
							"sid": 682027533163329
						},
						{
							"id": "destroy",
							"objectClass": "UpArrow",
							"sid": 445163869155149
						},
						{
							"id": "destroy",
							"objectClass": "DownArrow",
							"sid": 716136988852470
						},
						{
							"id": "destroy",
							"objectClass": "ChoiceSelector",
							"sid": 575174927132073
						},
						{
							"id": "map-function",
							"objectClass": "Functions",
							"sid": 438086202514874,
							"parameters": {
								"name": "\"Dialogue\"",
								"string": "\"Dialogue_ChoiceUp\"",
								"function": "Dialogue_ChoiceUp"
							}
						},
						{
							"id": "map-function",
							"objectClass": "Functions",
							"sid": 142521888909673,
							"parameters": {
								"name": "\"Dialogue\"",
								"string": "\"Dialogue_ChoiceDown\"",
								"function": "Dialogue_ChoiceDown"
							}
						}
					],
					"sid": 813749057928950
				},
				{
					"eventType": "group",
					"disabled": false,
					"title": "Optionnal",
					"description": "",
					"isActiveOnStart": true,
					"children": [
						{
							"eventType": "comment",
							"text": "DEPRECATED, use the \"Spacing data\" spritefont property instead. Will still work though if you wish to use events.",
							"text-color": [
								1,
								0,
								0,
								1
							]
						},
						{
							"eventType": "comment",
							"text": "This will set smaller character width for smaller characters.\r\nDisable for monospaced fonts, or adjust accordingly for your fonts particular sizes."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-created",
									"objectClass": "SpriteFont",
									"sid": 610295171791846
								}
							],
							"actions": [
								{
									"id": "set-character-width",
									"objectClass": "SpriteFont",
									"sid": 404417199489400,
									"parameters": {
										"character": "\"abcdefghknopqrstuvxyz\"",
										"width": "14"
									}
								},
								{
									"id": "set-character-width",
									"objectClass": "SpriteFont",
									"sid": 448656745661332,
									"parameters": {
										"character": "\"j\"",
										"width": "12"
									}
								},
								{
									"id": "set-character-width",
									"objectClass": "SpriteFont",
									"sid": 380776797705849,
									"parameters": {
										"character": "\"il,.!:;' \"",
										"width": "10"
									}
								}
							],
							"sid": 404557413070245,
							"disabled": true
						}
					],
					"sid": 108939722529518
				},
				{
					"eventType": "comment",
					"text": "Initial function, it starts the dialogue using data stored in the \"DialogueData\" array. Be sure to load the array before calling this (unless you used a Dialogue Dictionnary, see optional parameter)!\nsequenceName : (Optionnal) Key from which to load dialogue data inside the \"DialogueDictionary\" before starting. If omited, it will execute the currently loaded dialogue."
				},
				{
					"functionName": "Dialogue_StartDialogue",
					"functionDescription": "Initial function, it starts the dialogue using data stored in the \"DialogueData\" array. Be sure to load the array before calling this (unless you used a Dialogue Dictionnary, see optional parameter)!",
					"functionCategory": "Dialogue",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "sequenceName",
							"type": "string",
							"initialValue": "",
							"comment": "(Optionnal) Key from which to load dialogue data inside the \"DialogueDictionary\" before starting. If omited, it will execute the currently loaded dialogue.",
							"sid": 314144067604960
						}
					],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"id": "set-boolean-eventvar",
							"objectClass": "System",
							"sid": 265870018633499,
							"parameters": {
								"variable": "Dialogue_IsRunning",
								"value": "true"
							}
						}
					],
					"sid": 141868710911693,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-eventvar",
									"objectClass": "System",
									"sid": 815178275124446,
									"parameters": {
										"variable": "sequenceName",
										"comparison": 1,
										"value": "\"\""
									}
								},
								{
									"id": "has-key",
									"objectClass": "DialogueDictionary",
									"sid": 638910759317969,
									"parameters": {
										"key": "sequenceName"
									}
								}
							],
							"actions": [
								{
									"id": "load",
									"objectClass": "DialogueData",
									"sid": 525833982132907,
									"parameters": {
										"json": "DialogueDictionary.Get(sequenceName)"
									}
								}
							],
							"sid": 824368678440527
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "pick-by-comparison",
									"objectClass": "System",
									"sid": 978265634296084,
									"parameters": {
										"object": "SpriteFont",
										"expression": "left(SpriteFont.ID, 6)",
										"comparison": 0,
										"value": "\"choice\""
									}
								}
							],
							"actions": [
								{
									"id": "destroy",
									"objectClass": "SpriteFont",
									"sid": 989668376164758
								}
							],
							"sid": 250880094266747
						},
						{
							"eventType": "block",
							"conditions": [],
							"actions": [
								{
									"id": "destroy",
									"objectClass": "ChoiceSelector",
									"sid": 154933609549247
								},
								{
									"callFunction": "Dialogue_CreateWindow",
									"sid": 256848678543179,
									"parameters": [
										"DIALOGUE_POSITIONX",
										"DIALOGUE_POSITIONY",
										"DIALOGUE_WIDTH",
										"DIALOGUE_HEIGHT",
										"\"dialogue\""
									]
								},
								{
									"id": "create-object",
									"objectClass": "System",
									"sid": 680404933144318,
									"parameters": {
										"object-to-create": "SpriteFont",
										"layer": "DIALOGUE_LAYER",
										"x": "DIALOGUE_POSITIONX + DIALOGUE_MARGIN",
										"y": "DIALOGUE_POSITIONY + DIALOGUE_MARGIN",
										"create-hierarchy": false,
										"template-name": "\"\""
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "SpriteFont",
									"sid": 510476517172280,
									"parameters": {
										"instance-variable": "ID",
										"value": "\"dialogue\""
									}
								},
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 129158325446414,
									"parameters": {
										"variable": "Dialogue_SpriteFontUID",
										"value": "SpriteFont.UID"
									}
								},
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 626924750593895,
									"parameters": {
										"variable": "Dialogue_SequenceIndex",
										"value": "0"
									}
								},
								{
									"callFunction": "Dialogue_StartSequence",
									"sid": 477504775212140,
									"parameters": [
										"0"
									]
								}
							],
							"sid": 429139395993790
						}
					]
				},
				{
					"eventType": "comment",
					"text": "This function can also be used to create any other window using the same 9-Patch object, simply provide any other ID than \"dialogue\" so it won't interfere with the dialogue system.\nx : x window position, y : y window position, width : window width, height : window height, ID : Custom window ID"
				},
				{
					"functionName": "Dialogue_CreateWindow",
					"functionDescription": "This function can also be used to create any other window using the same 9-Patch object, simply provide any other ID than \"dialogue\" so it won't interfere with the dialogue system.",
					"functionCategory": "Dialogue - Internal",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "x",
							"type": "number",
							"initialValue": "0",
							"comment": "x window position",
							"sid": 114308343751211
						},
						{
							"name": "y",
							"type": "number",
							"initialValue": "0",
							"comment": "y window position",
							"sid": 888216087726855
						},
						{
							"name": "width",
							"type": "number",
							"initialValue": "0",
							"comment": "window width",
							"sid": 761379154225327
						},
						{
							"name": "height",
							"type": "number",
							"initialValue": "0",
							"comment": "window height",
							"sid": 758632571306205
						},
						{
							"name": "ID",
							"type": "string",
							"initialValue": "",
							"comment": "custom window ID",
							"sid": 249400478761470
						}
					],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"id": "create-object",
							"objectClass": "System",
							"sid": 203978524601918,
							"parameters": {
								"object-to-create": "WindowFrame",
								"layer": "DIALOGUE_LAYER",
								"x": "x",
								"y": "y",
								"create-hierarchy": false,
								"template-name": "\"\""
							}
						},
						{
							"id": "set-instvar-value",
							"objectClass": "WindowFrame",
							"sid": 438740891785077,
							"parameters": {
								"instance-variable": "ID",
								"value": "ID"
							}
						},
						{
							"id": "set-size",
							"objectClass": "WindowFrame",
							"sid": 862723335223786,
							"parameters": {
								"width": "width",
								"height": "height"
							}
						},
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 629687325720651,
							"parameters": {
								"variable": "Dialogue_WindowFrameUID",
								"value": "WindowFrame.UID"
							}
						}
					],
					"sid": 373794711182332
				},
				{
					"eventType": "comment",
					"text": "Starts the sequence passed as a parameter."
				},
				{
					"functionName": "Dialogue_StartSequence",
					"functionDescription": "Starts the sequence passed as a parameter.",
					"functionCategory": "Dialogue",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "sequenceIndex",
							"type": "number",
							"initialValue": "0",
							"comment": "Sequence index of the loaded dialogue to start.",
							"sid": 961611081110259
						}
					],
					"eventType": "function-block",
					"conditions": [
						{
							"id": "pick-by-unique-id",
							"objectClass": "SpriteFont",
							"sid": 110784202766189,
							"parameters": {
								"unique-id": "Dialogue_SpriteFontUID"
							}
						},
						{
							"id": "pick-by-unique-id",
							"objectClass": "WindowFrame",
							"sid": 182368213048158,
							"parameters": {
								"unique-id": "Dialogue_WindowFrameUID"
							}
						}
					],
					"actions": [],
					"sid": 364281500582579,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "pick-by-unique-id",
									"objectClass": "PortraitSprite",
									"sid": 800648053319502,
									"parameters": {
										"unique-id": "Dialogue_PortraitUID"
									}
								}
							],
							"actions": [
								{
									"id": "destroy",
									"objectClass": "PortraitSprite",
									"sid": 476561428148118
								}
							],
							"sid": 155348274994170
						},
						{
							"eventType": "block",
							"conditions": [],
							"actions": [
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 890067955794962,
									"parameters": {
										"variable": "Dialogue_CharIndex",
										"value": "0"
									}
								},
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 320386057463531,
									"parameters": {
										"variable": "Dialogue_Timer",
										"value": "0"
									}
								},
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 632713071898199,
									"parameters": {
										"variable": "Dialogue_LineNumber",
										"value": "0"
									}
								},
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 355746616055085,
									"parameters": {
										"variable": "Dialogue_WaitForChoice",
										"value": "0"
									}
								},
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 891742891765054,
									"parameters": {
										"variable": "Dialogue_WaitForInput",
										"value": "0"
									}
								},
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 256747163614763,
									"parameters": {
										"variable": "Dialogue_TextOverflow",
										"value": "0"
									}
								},
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 514046505858373,
									"parameters": {
										"variable": "Dialogue_StartCharIndex",
										"value": "0"
									}
								},
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 788354111835329,
									"parameters": {
										"variable": "Dialogue_CommandNumber",
										"value": "0"
									}
								},
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 298087000601239,
									"parameters": {
										"variable": "Dialogue_SkipSequence",
										"value": "0"
									}
								},
								{
									"id": "clear",
									"objectClass": "DialogueCommands",
									"sid": 557821358792411
								},
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 526654767117662,
									"parameters": {
										"variable": "Dialogue_CurrentTags",
										"value": "\"\""
									}
								},
								{
									"id": "set-text",
									"objectClass": "SpriteFont",
									"sid": 555528826742549,
									"parameters": {
										"text": "\"\""
									}
								},
								{
									"id": "set-size",
									"objectClass": "SpriteFont",
									"sid": 812143379890011,
									"parameters": {
										"width": "DIALOGUE_WIDTH - DIALOGUE_MARGIN * 2 - ((DialogueData.At(Dialogue_SequenceIndex,1) = 1|DialogueData.At(Dialogue_SequenceIndex,1) = 2) ? DIALOGUE_MARGIN + DIALOGUE_PORTRAITWIDTH : 0)",
										"height": "DIALOGUE_HEIGHT - DIALOGUE_MARGIN * 2 + DIALOGUE_LINEHEIGHT"
									}
								},
								{
									"id": "set-x",
									"objectClass": "SpriteFont",
									"sid": 321790092155531,
									"parameters": {
										"x": "DIALOGUE_POSITIONX + DIALOGUE_MARGIN + (DialogueData.At(Dialogue_SequenceIndex, 1) = 1 ? DIALOGUE_PORTRAITWIDTH + DIALOGUE_MARGIN : 0)"
									}
								},
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 473799979074300,
									"parameters": {
										"variable": "Dialogue_SequenceCharDelay",
										"value": "DIALOGUE_DEFAULTDELAY"
									}
								},
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 198541631246533,
									"parameters": {
										"variable": "Dialogue_ProcessedText",
										"value": "Functions.Dialogue_ProcessText(SpriteFont.Width)"
									}
								},
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 349002860701587,
									"parameters": {
										"variable": "Dialogue_CurrentTags",
										"value": "\"\""
									}
								}
							],
							"sid": 507026608437854
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-at-xy",
									"objectClass": "DialogueData",
									"sid": 452631697440731,
									"parameters": {
										"x": "Dialogue_SequenceIndex",
										"y": "6",
										"comparison": 0,
										"value": "1"
									}
								}
							],
							"actions": [
								{
									"id": "set-visible",
									"objectClass": "WindowFrame",
									"sid": 768677142268494,
									"parameters": {
										"visibility": "invisible"
									}
								}
							],
							"sid": 490044069702339
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 544142187796617
								}
							],
							"actions": [
								{
									"id": "set-visible",
									"objectClass": "WindowFrame",
									"sid": 942951592851055,
									"parameters": {
										"visibility": "visible"
									}
								}
							],
							"sid": 828298549116508
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-at-xy",
									"objectClass": "DialogueData",
									"sid": 462842983493409,
									"parameters": {
										"x": "Dialogue_SequenceIndex",
										"y": "1",
										"comparison": 5,
										"value": "1"
									}
								},
								{
									"id": "compare-at-xy",
									"objectClass": "DialogueData",
									"sid": 759672233976527,
									"parameters": {
										"x": "Dialogue_SequenceIndex",
										"y": "1",
										"comparison": 3,
										"value": "3"
									}
								}
							],
							"actions": [
								{
									"id": "create-object",
									"objectClass": "System",
									"sid": 419900995625060,
									"parameters": {
										"object-to-create": "PortraitSprite",
										"layer": "DIALOGUE_LAYER",
										"x": "WindowFrame.X + (DialogueData.At(Dialogue_SequenceIndex, 1) = 2 ? WindowFrame.Width - DIALOGUE_MARGIN - DIALOGUE_PORTRAITWIDTH : (DialogueData.At(Dialogue_SequenceIndex, 1) = 3 ? int(DialogueData.At(Dialogue_SequenceIndex, 3)) : DIALOGUE_MARGIN)) + (DialogueData.At(Dialogue_SequenceIndex, 5) = 1) * DIALOGUE_PORTRAITWIDTH",
										"y": "WindowFrame.Y + (DialogueData.At(Dialogue_SequenceIndex, 1) = 3 ? int(DialogueData.At(Dialogue_SequenceIndex, 4)) : DIALOGUE_MARGIN)",
										"create-hierarchy": false,
										"template-name": "\"\""
									}
								},
								{
									"id": "set-animation",
									"objectClass": "PortraitSprite",
									"sid": 919580060889727,
									"parameters": {
										"animation": "DialogueData.At(Dialogue_SequenceIndex, 2)",
										"from": "beginning"
									}
								},
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 911201569261715,
									"parameters": {
										"variable": "Dialogue_PortraitUID",
										"value": "PortraitSprite.UID"
									}
								}
							],
							"sid": 802695754483198,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-at-xy",
											"objectClass": "DialogueData",
											"sid": 920837269181049,
											"parameters": {
												"x": "Dialogue_SequenceIndex",
												"y": "5",
												"comparison": 0,
												"value": "1"
											}
										}
									],
									"actions": [
										{
											"id": "set-mirrored",
											"objectClass": "PortraitSprite",
											"sid": 343236821938692,
											"parameters": {
												"state": "mirrored"
											}
										}
									],
									"sid": 658374002885390
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-at-xy",
											"objectClass": "DialogueData",
											"sid": 654882960334149,
											"parameters": {
												"x": "Dialogue_SequenceIndex",
												"y": "5",
												"comparison": 1,
												"value": "1"
											}
										}
									],
									"actions": [
										{
											"id": "set-mirrored",
											"objectClass": "PortraitSprite",
											"sid": 573720171433698,
											"parameters": {
												"state": "not-mirrored"
											}
										}
									],
									"sid": 789652307196705
								}
							]
						}
					]
				},
				{
					"eventType": "comment",
					"text": "Called to enable skipping until the end of a sequence or text overload, whichever comes first."
				},
				{
					"functionName": "Dialogue_SkipSequence",
					"functionDescription": "Called to enable skipping until the end of a sequence or text overload, whichever comes first.",
					"functionCategory": "Dialogue",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 527497491506403,
							"parameters": {
								"variable": "Dialogue_SkipSequence",
								"value": "1"
							}
						}
					],
					"sid": 276108096354609
				},
				{
					"eventType": "comment",
					"text": "Characters are fetched under this event, and commands processed. Most of the magic happens here, in a series of nested function calls. This shouldn't need any tweaking... \r\nIt will run every tick when SequenceIndex <> -1 (i.e. when no sequence are running)"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-eventvar",
							"objectClass": "System",
							"sid": 790758120486029,
							"parameters": {
								"variable": "Dialogue_SequenceIndex",
								"comparison": 1,
								"value": "-1"
							}
						}
					],
					"actions": [],
					"sid": 143292173024443,
					"children": [
						{
							"eventType": "comment",
							"text": "We are currently skipping, so fetch a new character until either the end of the sequence or a text overload occurs."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-eventvar",
									"objectClass": "System",
									"sid": 424363313329246,
									"parameters": {
										"variable": "Dialogue_SkipSequence",
										"comparison": 0,
										"value": "1"
									}
								},
								{
									"id": "compare-eventvar",
									"objectClass": "System",
									"sid": 760912840923820,
									"parameters": {
										"variable": "Dialogue_CharIndex",
										"comparison": 2,
										"value": "len(Dialogue_ProcessedText)+1"
									}
								},
								{
									"id": "compare-eventvar",
									"objectClass": "System",
									"sid": 381214943353694,
									"parameters": {
										"variable": "Dialogue_WaitForInput",
										"comparison": 1,
										"value": "1"
									}
								},
								{
									"id": "compare-eventvar",
									"objectClass": "System",
									"sid": 409603376084165,
									"parameters": {
										"variable": "Dialogue_WaitForChoice",
										"comparison": 1,
										"value": "1"
									}
								}
							],
							"actions": [],
							"sid": 568900332665858,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "while",
											"objectClass": "System",
											"sid": 232754564480346
										},
										{
											"id": "compare-eventvar",
											"objectClass": "System",
											"sid": 807960167549720,
											"parameters": {
												"variable": "Dialogue_CharIndex",
												"comparison": 2,
												"value": "len(Dialogue_ProcessedText)+1"
											}
										},
										{
											"id": "compare-eventvar",
											"objectClass": "System",
											"sid": 286778888745718,
											"parameters": {
												"variable": "Dialogue_WaitForInput",
												"comparison": 1,
												"value": "1"
											}
										},
										{
											"id": "compare-eventvar",
											"objectClass": "System",
											"sid": 791029335237879,
											"parameters": {
												"variable": "Dialogue_WaitForChoice",
												"comparison": 1,
												"value": "1"
											}
										}
									],
									"actions": [
										{
											"callFunction": "Dialogue_NextChar",
											"sid": 957290252657810
										}
									],
									"sid": 465881751540718
								},
								{
									"eventType": "block",
									"conditions": [],
									"actions": [
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 746181249620185,
											"parameters": {
												"variable": "Dialogue_SkipSequence",
												"value": "0"
											}
										},
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 448411137551443,
											"parameters": {
												"variable": "Dialogue_Timer",
												"value": "0"
											}
										}
									],
									"sid": 341105629545132,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-eventvar",
													"objectClass": "System",
													"sid": 199451733036895,
													"parameters": {
														"variable": "Dialogue_WaitForInput",
														"comparison": 1,
														"value": "1"
													}
												}
											],
											"actions": [
												{
													"id": "set-eventvar-value",
													"objectClass": "System",
													"sid": 457542505095534,
													"parameters": {
														"variable": "Dialogue_CharIndex",
														"value": "len(Dialogue_ProcessedText)"
													}
												}
											],
											"sid": 779639650466885
										}
									]
								}
							]
						},
						{
							"eventType": "comment",
							"text": "Sequence is not finished, advance timer and check if a new character needs to be fetched."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 969550773275624
								},
								{
									"id": "compare-eventvar",
									"objectClass": "System",
									"sid": 402062668983145,
									"parameters": {
										"variable": "Dialogue_CharIndex",
										"comparison": 3,
										"value": "len(Dialogue_ProcessedText)"
									}
								},
								{
									"id": "compare-eventvar",
									"objectClass": "System",
									"sid": 596009705719878,
									"parameters": {
										"variable": "Dialogue_WaitForInput",
										"comparison": 0,
										"value": "0"
									}
								},
								{
									"id": "compare-eventvar",
									"objectClass": "System",
									"sid": 441355990892613,
									"parameters": {
										"variable": "Dialogue_WaitForChoice",
										"comparison": 0,
										"value": "0"
									}
								}
							],
							"actions": [],
							"sid": 433552108259665,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-eventvar",
											"objectClass": "System",
											"sid": 642579653932395,
											"parameters": {
												"variable": "Dialogue_Timer",
												"comparison": 4,
												"value": "0"
											}
										}
									],
									"actions": [
										{
											"id": "subtract-from-eventvar",
											"objectClass": "System",
											"sid": 902309540739056,
											"parameters": {
												"variable": "Dialogue_Timer",
												"value": "dt * 1000"
											}
										},
										{
											"id": "signal",
											"objectClass": "System",
											"sid": 875361578483461,
											"parameters": {
												"tag": "\"DIALOGUE_ISTYPEING\""
											}
										}
									],
									"sid": 519872935376749
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-eventvar",
											"objectClass": "System",
											"sid": 445692932243988,
											"parameters": {
												"variable": "Dialogue_Timer",
												"comparison": 3,
												"value": "0"
											}
										}
									],
									"actions": [
										{
											"callFunction": "Dialogue_NextChar",
											"sid": 325052541602524
										}
									],
									"sid": 343337973756905
								}
							]
						},
						{
							"eventType": "comment",
							"text": "This will occur when a \"pause\" command is issued. Simply create a \"ContinueIndicator\" and wait for user input."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 371504732322709
								},
								{
									"id": "pick-by-unique-id",
									"objectClass": "WindowFrame",
									"sid": 995683899669855,
									"parameters": {
										"unique-id": "Dialogue_WindowFrameUID"
									}
								},
								{
									"id": "compare-eventvar",
									"objectClass": "System",
									"sid": 428492368435063,
									"parameters": {
										"variable": "Dialogue_WaitForInput",
										"comparison": 0,
										"value": "1"
									}
								},
								{
									"id": "trigger-once-while-true",
									"objectClass": "System",
									"sid": 648817562512700
								}
							],
							"actions": [
								{
									"id": "create-object",
									"objectClass": "System",
									"sid": 110978438554503,
									"parameters": {
										"object-to-create": "ContinueIndicator",
										"layer": "DIALOGUE_LAYER",
										"x": "WindowFrame.X + WindowFrame.Width / 2",
										"y": "WindowFrame.Y + WindowFrame.Height - DIALOGUE_MARGIN",
										"create-hierarchy": false,
										"template-name": "\"\""
									}
								}
							],
							"sid": 171354651508018
						},
						{
							"eventType": "comment",
							"text": "A choice has been initiated, hide choices outside the textbox (if any)"
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 175231287953324
								},
								{
									"id": "pick-by-unique-id",
									"objectClass": "WindowFrame",
									"sid": 425942231976430,
									"parameters": {
										"unique-id": "Dialogue_WindowFrameUID"
									}
								},
								{
									"id": "compare-eventvar",
									"objectClass": "System",
									"sid": 450740836976972,
									"parameters": {
										"variable": "Dialogue_WaitForInput",
										"comparison": 0,
										"value": "0"
									}
								},
								{
									"id": "compare-eventvar",
									"objectClass": "System",
									"sid": 141867920779099,
									"parameters": {
										"variable": "Dialogue_WaitForChoice",
										"comparison": 0,
										"value": "1"
									}
								},
								{
									"id": "pick-by-comparison",
									"objectClass": "System",
									"sid": 771404732461521,
									"parameters": {
										"object": "SpriteFont",
										"expression": "SpriteFont.ID",
										"comparison": 0,
										"value": "\"dialogue\""
									}
								},
								{
									"id": "trigger-once-while-true",
									"objectClass": "System",
									"sid": 933191700682932
								}
							],
							"actions": [
								{
									"callFunction": "Dialogue_HideShowChoices",
									"sid": 551284584876333
								},
								{
									"id": "set-visible",
									"objectClass": "SpriteFont",
									"sid": 784386348312850,
									"parameters": {
										"visibility": "invisible"
									}
								}
							],
							"sid": 220387524939367,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-eventvar",
											"objectClass": "System",
											"sid": 265282905159831,
											"parameters": {
												"variable": "Dialogue_TapChoice",
												"comparison": 0,
												"value": "0"
											}
										},
										{
											"id": "pick-all",
											"objectClass": "System",
											"sid": 123350518034703,
											"parameters": {
												"object": "SpriteFont"
											}
										},
										{
											"id": "pick-by-comparison",
											"objectClass": "System",
											"sid": 679609674342934,
											"parameters": {
												"object": "SpriteFont",
												"expression": "SpriteFont.ID",
												"comparison": 0,
												"value": "\"choice0\""
											}
										}
									],
									"actions": [
										{
											"id": "create-object",
											"objectClass": "System",
											"sid": 273322231525918,
											"parameters": {
												"object-to-create": "ChoiceSelector",
												"layer": "DIALOGUE_LAYER",
												"x": "SpriteFont.X - DIALOGUE_MARGIN / 2",
												"y": "SpriteFont.Y - DIALOGUE_MARGIN / 2",
												"create-hierarchy": false,
												"template-name": "\"\""
											}
										},
										{
											"id": "set-size",
											"objectClass": "ChoiceSelector",
											"sid": 775747055734876,
											"parameters": {
												"width": "SpriteFont.TextWidth + DIALOGUE_MARGIN",
												"height": "SpriteFont.Height + DIALOGUE_MARGIN"
											}
										},
										{
											"id": "set-instvar-value",
											"objectClass": "ChoiceSelector",
											"sid": 724450119848702,
											"parameters": {
												"instance-variable": "callback",
												"value": "\"Dialogue_ChoiceSelect\""
											}
										},
										{
											"id": "set-instvar-value",
											"objectClass": "ChoiceSelector",
											"sid": 329036712330828,
											"parameters": {
												"instance-variable": "params",
												"value": "\"0\""
											}
										}
									],
									"sid": 863367907006961
								}
							]
						},
						{
							"eventType": "comment",
							"text": "End of sequence reached, create an indicator and wait for user to continue."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 185171444087032
								},
								{
									"id": "pick-by-unique-id",
									"objectClass": "WindowFrame",
									"sid": 451323694874545,
									"parameters": {
										"unique-id": "Dialogue_WindowFrameUID"
									}
								},
								{
									"id": "compare-eventvar",
									"objectClass": "System",
									"sid": 119352860649269,
									"parameters": {
										"variable": "Dialogue_WaitForChoice",
										"comparison": 0,
										"value": "0"
									}
								},
								{
									"id": "compare-eventvar",
									"objectClass": "System",
									"sid": 669942730276763,
									"parameters": {
										"variable": "Dialogue_WaitForInput",
										"comparison": 0,
										"value": "0"
									}
								},
								{
									"id": "compare-eventvar",
									"objectClass": "System",
									"sid": 980381983221023,
									"parameters": {
										"variable": "Dialogue_CharIndex",
										"comparison": 0,
										"value": "len(Dialogue_ProcessedText)+1"
									}
								}
							],
							"actions": [
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 569763345492670,
									"parameters": {
										"variable": "Dialogue_WaitForInput",
										"value": "1"
									}
								},
								{
									"id": "create-object",
									"objectClass": "System",
									"sid": 415061222885485,
									"parameters": {
										"object-to-create": "ContinueIndicator",
										"layer": "DIALOGUE_LAYER",
										"x": "WindowFrame.X + WindowFrame.Width / 2",
										"y": "WindowFrame.Y + WindowFrame.Height - DIALOGUE_MARGIN",
										"create-hierarchy": false,
										"template-name": "\"\""
									}
								}
							],
							"sid": 196686460672670
						}
					]
				},
				{
					"eventType": "comment",
					"text": "This function display and hide choices accordingly depending on if they overflow the textbox or not."
				},
				{
					"functionName": "Dialogue_HideShowChoices",
					"functionDescription": "",
					"functionCategory": "Dialogue - Internal",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"id": "destroy",
							"objectClass": "UpArrow",
							"sid": 639408248248228
						},
						{
							"id": "destroy",
							"objectClass": "DownArrow",
							"sid": 135162509923906
						}
					],
					"sid": 963812857641742,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-eventvar",
									"objectClass": "System",
									"sid": 648676220878416,
									"parameters": {
										"variable": "Dialogue_TapChoice",
										"comparison": 0,
										"value": "1"
									}
								}
							],
							"actions": [
								{
									"id": "destroy",
									"objectClass": "ChoiceSelector",
									"sid": 757991181123942
								}
							],
							"sid": 250416934372078
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "pick-by-unique-id",
									"objectClass": "WindowFrame",
									"sid": 174920830517944,
									"parameters": {
										"unique-id": "Dialogue_WindowFrameUID"
									}
								},
								{
									"id": "pick-by-comparison",
									"objectClass": "System",
									"sid": 838923233006183,
									"parameters": {
										"object": "SpriteFont",
										"expression": "left(SpriteFont.ID, 6)",
										"comparison": 0,
										"value": "\"choice\""
									}
								}
							],
							"actions": [
								{
									"id": "set-visible",
									"objectClass": "SpriteFont",
									"sid": 416950228446451,
									"parameters": {
										"visibility": "visible"
									}
								}
							],
							"sid": 322542020037557,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "pick-by-comparison",
											"objectClass": "System",
											"sid": 146449403289040,
											"parameters": {
												"object": "SpriteFont",
												"expression": "SpriteFont.Y + SpriteFont.TextHeight + DIALOGUE_MARGIN",
												"comparison": 5,
												"value": "WindowFrame.Y + WindowFrame.Height"
											}
										}
									],
									"actions": [
										{
											"id": "set-visible",
											"objectClass": "SpriteFont",
											"sid": 241059656441423,
											"parameters": {
												"visibility": "invisible"
											}
										},
										{
											"id": "create-object",
											"objectClass": "System",
											"sid": 774484173362901,
											"parameters": {
												"object-to-create": "DownArrow",
												"layer": "DIALOGUE_LAYER",
												"x": "DIALOGUE_POSITIONX + DIALOGUE_WIDTH - DIALOGUE_MARGIN - DIALOGUE_ARROWSIZE / 2",
												"y": "DIALOGUE_POSITIONY + DIALOGUE_HEIGHT - DIALOGUE_MARGIN - DIALOGUE_ARROWSIZE / 2",
												"create-hierarchy": false,
												"template-name": "\"\""
											}
										}
									],
									"sid": 311972803770140,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-eventvar",
													"objectClass": "System",
													"sid": 625493899788026,
													"parameters": {
														"variable": "Dialogue_TapChoice",
														"comparison": 0,
														"value": "1"
													}
												}
											],
											"actions": [
												{
													"id": "create-object",
													"objectClass": "System",
													"sid": 246112019797952,
													"parameters": {
														"object-to-create": "ChoiceSelector",
														"layer": "DIALOGUE_LAYER",
														"x": "DIALOGUE_POSITIONX + DIALOGUE_WIDTH - DIALOGUE_MARGIN - DIALOGUE_ARROWSIZE * 1.5",
														"y": "DIALOGUE_POSITIONY + DIALOGUE_HEIGHT - DIALOGUE_MARGIN - DIALOGUE_ARROWSIZE * 1.5",
														"create-hierarchy": false,
														"template-name": "\"\""
													}
												},
												{
													"id": "set-size",
													"objectClass": "ChoiceSelector",
													"sid": 436764555161737,
													"parameters": {
														"width": "DIALOGUE_ARROWSIZE * 2",
														"height": "DIALOGUE_ARROWSIZE * 2"
													}
												},
												{
													"id": "set-instvar-value",
													"objectClass": "ChoiceSelector",
													"sid": 358989922566413,
													"parameters": {
														"instance-variable": "callback",
														"value": "\"Dialogue_ChoiceDown\""
													}
												}
											],
											"sid": 603899274598971
										}
									]
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "pick-by-comparison",
											"objectClass": "System",
											"sid": 111717077269805,
											"parameters": {
												"object": "SpriteFont",
												"expression": "SpriteFont.Y + DIALOGUE_MARGIN",
												"comparison": 3,
												"value": "WindowFrame.Y"
											}
										}
									],
									"actions": [
										{
											"id": "set-visible",
											"objectClass": "SpriteFont",
											"sid": 224414294283452,
											"parameters": {
												"visibility": "invisible"
											}
										},
										{
											"id": "create-object",
											"objectClass": "System",
											"sid": 469551014284352,
											"parameters": {
												"object-to-create": "UpArrow",
												"layer": "DIALOGUE_LAYER",
												"x": "DIALOGUE_POSITIONX + DIALOGUE_WIDTH - DIALOGUE_MARGIN - DIALOGUE_ARROWSIZE / 2",
												"y": "DIALOGUE_POSITIONY + DIALOGUE_MARGIN + DIALOGUE_ARROWSIZE / 2",
												"create-hierarchy": false,
												"template-name": "\"\""
											}
										}
									],
									"sid": 420070274258557,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-eventvar",
													"objectClass": "System",
													"sid": 957798639774282,
													"parameters": {
														"variable": "Dialogue_TapChoice",
														"comparison": 0,
														"value": "1"
													}
												}
											],
											"actions": [
												{
													"id": "create-object",
													"objectClass": "System",
													"sid": 523386480541822,
													"parameters": {
														"object-to-create": "ChoiceSelector",
														"layer": "DIALOGUE_LAYER",
														"x": "DIALOGUE_POSITIONX + DIALOGUE_WIDTH - DIALOGUE_MARGIN - DIALOGUE_ARROWSIZE * 1.5",
														"y": "DIALOGUE_POSITIONY + DIALOGUE_MARGIN - DIALOGUE_ARROWSIZE * 0.5",
														"create-hierarchy": false,
														"template-name": "\"\""
													}
												},
												{
													"id": "set-size",
													"objectClass": "ChoiceSelector",
													"sid": 133072825739463,
													"parameters": {
														"width": "DIALOGUE_ARROWSIZE * 2",
														"height": "DIALOGUE_ARROWSIZE * 2"
													}
												},
												{
													"id": "set-instvar-value",
													"objectClass": "ChoiceSelector",
													"sid": 417366271870753,
													"parameters": {
														"instance-variable": "callback",
														"value": "\"Dialogue_ChoiceUp\""
													}
												}
											],
											"sid": 328914018956970
										}
									]
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "pick-by-comparison",
											"objectClass": "System",
											"sid": 350639692190046,
											"parameters": {
												"object": "SpriteFont",
												"expression": "SpriteFont.ID",
												"comparison": 0,
												"value": "\"choice\" & Dialogue_ChoiceIndex"
											}
										}
									],
									"actions": [
										{
											"id": "set-visible",
											"objectClass": "SpriteFont",
											"sid": 447625129079185,
											"parameters": {
												"visibility": "visible"
											}
										}
									],
									"sid": 561504291502322
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-eventvar",
											"objectClass": "System",
											"sid": 521403762759398,
											"parameters": {
												"variable": "Dialogue_TapChoice",
												"comparison": 0,
												"value": "1"
											}
										},
										{
											"id": "is-visible",
											"objectClass": "SpriteFont",
											"sid": 448705397892848
										},
										{
											"id": "for-each",
											"objectClass": "System",
											"sid": 382590745320738,
											"parameters": {
												"object": "SpriteFont"
											}
										}
									],
									"actions": [
										{
											"id": "create-object",
											"objectClass": "System",
											"sid": 354453648972538,
											"parameters": {
												"object-to-create": "ChoiceSelector",
												"layer": "DIALOGUE_LAYER",
												"x": "SpriteFont.X - DIALOGUE_MARGIN / 2",
												"y": "SpriteFont.Y - DIALOGUE_MARGIN / 2",
												"create-hierarchy": false,
												"template-name": "\"\""
											}
										},
										{
											"id": "set-size",
											"objectClass": "ChoiceSelector",
											"sid": 218855997540459,
											"parameters": {
												"width": "min(SpriteFont.TextWidth + DIALOGUE_MARGIN, DIALOGUE_WIDTH - DIALOGUE_MARGIN * 2 - DIALOGUE_ARROWSIZE)",
												"height": "SpriteFont.TextHeight + DIALOGUE_MARGIN"
											}
										},
										{
											"id": "set-instvar-value",
											"objectClass": "ChoiceSelector",
											"sid": 692066942273203,
											"parameters": {
												"instance-variable": "callback",
												"value": "\"Dialogue_ChoiceSelect\""
											}
										},
										{
											"id": "set-instvar-value",
											"objectClass": "ChoiceSelector",
											"sid": 388217840389526,
											"parameters": {
												"instance-variable": "params",
												"value": "mid(SpriteFont.ID, 6, len(SpriteFont.ID) - 6)"
											}
										}
									],
									"sid": 396091325291141
								}
							]
						}
					]
				},
				{
					"functionName": "Dialogue_ChoiceUp",
					"functionDescription": "Callback for going up in the choice selection. (normal mode)",
					"functionCategory": "Dialogue - Callback",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [],
					"eventType": "function-block",
					"conditions": [],
					"actions": [],
					"sid": 120082299073313,
					"children": [
						{
							"eventType": "variable",
							"name": "offsetY",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"isStatic": false,
							"isConstant": false,
							"sid": 889324147730498
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-eventvar",
									"objectClass": "System",
									"sid": 315967370213375,
									"parameters": {
										"variable": "Dialogue_TapChoice",
										"comparison": 0,
										"value": "1"
									}
								}
							],
							"actions": [],
							"sid": 238731611714033,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "pick-by-comparison",
											"objectClass": "System",
											"sid": 484607797357502,
											"parameters": {
												"object": "SpriteFont",
												"expression": "left(SpriteFont.ID, 6)",
												"comparison": 0,
												"value": "\"choice\""
											}
										},
										{
											"id": "compare-two-values",
											"objectClass": "System",
											"sid": 125753389803925,
											"parameters": {
												"first-value": "UpArrow.Count",
												"comparison": 0,
												"second-value": "1"
											}
										}
									],
									"actions": [],
									"sid": 279843542383473,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "is-visible",
													"objectClass": "SpriteFont",
													"sid": 840802004027118,
													"isInverted": true
												},
												{
													"id": "pick-by-comparison",
													"objectClass": "System",
													"sid": 729829978070816,
													"parameters": {
														"object": "SpriteFont",
														"expression": "SpriteFont.Y - DIALOGUE_MARGIN",
														"comparison": 3,
														"value": "WindowFrame.Y"
													}
												},
												{
													"id": "for-each-ordered",
													"objectClass": "System",
													"sid": 623524257477684,
													"parameters": {
														"object": "SpriteFont",
														"expression": "SpriteFont.Y",
														"order": "descending"
													}
												}
											],
											"actions": [
												{
													"id": "set-eventvar-value",
													"objectClass": "System",
													"sid": 382854676797522,
													"parameters": {
														"variable": "offsetY",
														"value": "SpriteFont.TextHeight"
													}
												},
												{
													"id": "stop-loop",
													"objectClass": "System",
													"sid": 169313500432995
												}
											],
											"sid": 162714040588762
										},
										{
											"eventType": "block",
											"conditions": [],
											"actions": [
												{
													"id": "subtract-from-eventvar",
													"objectClass": "System",
													"sid": 633386653925443,
													"parameters": {
														"variable": "Dialogue_ChoiceIndex",
														"value": "1"
													}
												},
												{
													"id": "set-y",
													"objectClass": "SpriteFont",
													"sid": 437583579800503,
													"parameters": {
														"y": "Self.Y + offsetY + DIALOGUE_LINEHEIGHT"
													}
												},
												{
													"callFunction": "Dialogue_HideShowChoices",
													"sid": 884020697058261
												}
											],
											"sid": 157408188409647
										}
									]
								}
							]
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 796483416099295
								}
							],
							"actions": [],
							"sid": 370845071199036,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "pick-by-comparison",
											"objectClass": "System",
											"sid": 581270199787507,
											"parameters": {
												"object": "SpriteFont",
												"expression": "left(SpriteFont.ID, 6)",
												"comparison": 0,
												"value": "\"choice\""
											}
										},
										{
											"id": "compare-two-values",
											"objectClass": "System",
											"sid": 178001807149649,
											"parameters": {
												"first-value": "Dialogue_ChoiceIndex",
												"comparison": 4,
												"second-value": "0"
											}
										}
									],
									"actions": [
										{
											"id": "subtract-from-eventvar",
											"objectClass": "System",
											"sid": 703880477756062,
											"parameters": {
												"variable": "Dialogue_ChoiceIndex",
												"value": "1"
											}
										}
									],
									"sid": 883867652413910,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "pick-by-comparison",
													"objectClass": "System",
													"sid": 755913551168868,
													"parameters": {
														"object": "SpriteFont",
														"expression": "SpriteFont.ID",
														"comparison": 0,
														"value": "\"choice\" & Dialogue_ChoiceIndex"
													}
												},
												{
													"id": "is-visible",
													"objectClass": "SpriteFont",
													"sid": 390127977461498
												}
											],
											"actions": [
												{
													"id": "set-position",
													"objectClass": "ChoiceSelector",
													"sid": 804449265527874,
													"parameters": {
														"x": "SpriteFont.X - DIALOGUE_MARGIN / 2",
														"y": "SpriteFont.Y - DIALOGUE_MARGIN / 2"
													}
												},
												{
													"id": "set-size",
													"objectClass": "ChoiceSelector",
													"sid": 931802095859351,
													"parameters": {
														"width": "min(SpriteFont.TextWidth + DIALOGUE_MARGIN, DIALOGUE_WIDTH - DIALOGUE_MARGIN * 2 - DIALOGUE_ARROWSIZE)",
														"height": "SpriteFont.TextHeight + DIALOGUE_MARGIN"
													}
												},
												{
													"id": "set-instvar-value",
													"objectClass": "ChoiceSelector",
													"sid": 749864988573974,
													"parameters": {
														"instance-variable": "params",
														"value": "mid(SpriteFont.ID, 6, len(SpriteFont.ID) - 6)"
													}
												}
											],
											"sid": 240957124259495
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 182138587246967
												}
											],
											"actions": [],
											"sid": 190291532365963,
											"children": [
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "is-visible",
															"objectClass": "SpriteFont",
															"sid": 574606107038717,
															"isInverted": true
														},
														{
															"id": "pick-by-comparison",
															"objectClass": "System",
															"sid": 999119244117581,
															"parameters": {
																"object": "SpriteFont",
																"expression": "SpriteFont.Y - DIALOGUE_MARGIN",
																"comparison": 3,
																"value": "WindowFrame.Y"
															}
														},
														{
															"id": "for-each-ordered",
															"objectClass": "System",
															"sid": 177316794155002,
															"parameters": {
																"object": "SpriteFont",
																"expression": "SpriteFont.Y",
																"order": "descending"
															}
														}
													],
													"actions": [
														{
															"id": "set-eventvar-value",
															"objectClass": "System",
															"sid": 143611536401016,
															"parameters": {
																"variable": "offsetY",
																"value": "SpriteFont.TextHeight"
															}
														},
														{
															"id": "stop-loop",
															"objectClass": "System",
															"sid": 974078646137064
														}
													],
													"sid": 621595646855316
												},
												{
													"eventType": "block",
													"conditions": [],
													"actions": [
														{
															"id": "set-y",
															"objectClass": "SpriteFont",
															"sid": 719488066039376,
															"parameters": {
																"y": "Self.Y + offsetY + DIALOGUE_LINEHEIGHT"
															}
														},
														{
															"callFunction": "Dialogue_HideShowChoices",
															"sid": 753706734089681
														}
													],
													"sid": 443178129231249
												},
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "pick-all",
															"objectClass": "System",
															"sid": 758709453813019,
															"parameters": {
																"object": "SpriteFont"
															}
														},
														{
															"id": "pick-by-comparison",
															"objectClass": "System",
															"sid": 869679762011663,
															"parameters": {
																"object": "SpriteFont",
																"expression": "SpriteFont.ID",
																"comparison": 0,
																"value": "\"choice\" & Dialogue_ChoiceIndex"
															}
														}
													],
													"actions": [
														{
															"id": "set-position",
															"objectClass": "ChoiceSelector",
															"sid": 916769321507405,
															"parameters": {
																"x": "SpriteFont.X - DIALOGUE_MARGIN / 2",
																"y": "SpriteFont.Y - DIALOGUE_MARGIN / 2"
															}
														},
														{
															"id": "set-size",
															"objectClass": "ChoiceSelector",
															"sid": 728523383760135,
															"parameters": {
																"width": "min(SpriteFont.TextWidth + DIALOGUE_MARGIN, DIALOGUE_WIDTH - DIALOGUE_MARGIN * 2 - DIALOGUE_ARROWSIZE)",
																"height": "SpriteFont.TextHeight + DIALOGUE_MARGIN"
															}
														},
														{
															"id": "set-instvar-value",
															"objectClass": "ChoiceSelector",
															"sid": 691377775879610,
															"parameters": {
																"instance-variable": "params",
																"value": "mid(SpriteFont.ID, 6, len(SpriteFont.ID) - 6)"
															}
														}
													],
													"sid": 270649301344559
												}
											]
										}
									]
								}
							]
						}
					]
				},
				{
					"functionName": "Dialogue_ChoiceDown",
					"functionDescription": "Callback for going down in the choice selection. (normal mode)",
					"functionCategory": "Dialogue - Callback",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [],
					"eventType": "function-block",
					"conditions": [],
					"actions": [],
					"sid": 734270601518723,
					"children": [
						{
							"eventType": "variable",
							"name": "offsetY",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"isStatic": false,
							"isConstant": false,
							"sid": 969713183028800
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-eventvar",
									"objectClass": "System",
									"sid": 733863367834013,
									"parameters": {
										"variable": "Dialogue_TapChoice",
										"comparison": 0,
										"value": "1"
									}
								}
							],
							"actions": [],
							"sid": 665463173242720,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "pick-by-comparison",
											"objectClass": "System",
											"sid": 591852917868804,
											"parameters": {
												"object": "SpriteFont",
												"expression": "left(SpriteFont.ID, 6)",
												"comparison": 0,
												"value": "\"choice\""
											}
										},
										{
											"id": "compare-two-values",
											"objectClass": "System",
											"sid": 870403751637379,
											"parameters": {
												"first-value": "DownArrow.Count",
												"comparison": 0,
												"second-value": "1"
											}
										}
									],
									"actions": [],
									"sid": 257766647037504,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "is-visible",
													"objectClass": "SpriteFont",
													"sid": 960378103300534
												},
												{
													"id": "for-each-ordered",
													"objectClass": "System",
													"sid": 326728819980847,
													"parameters": {
														"object": "SpriteFont",
														"expression": "SpriteFont.Y",
														"order": "ascending"
													}
												}
											],
											"actions": [
												{
													"id": "set-eventvar-value",
													"objectClass": "System",
													"sid": 276338215659155,
													"parameters": {
														"variable": "offsetY",
														"value": "SpriteFont.TextHeight"
													}
												},
												{
													"id": "stop-loop",
													"objectClass": "System",
													"sid": 676612997697234
												}
											],
											"sid": 897488893424834
										},
										{
											"eventType": "block",
											"conditions": [],
											"actions": [
												{
													"id": "add-to-eventvar",
													"objectClass": "System",
													"sid": 521805977414364,
													"parameters": {
														"variable": "Dialogue_ChoiceIndex",
														"value": "1"
													}
												},
												{
													"id": "set-y",
													"objectClass": "SpriteFont",
													"sid": 137554007890851,
													"parameters": {
														"y": "Self.Y - offsetY - DIALOGUE_LINEHEIGHT"
													}
												},
												{
													"callFunction": "Dialogue_HideShowChoices",
													"sid": 473255116102557
												}
											],
											"sid": 925879658870914
										}
									]
								}
							]
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 890305269414533
								}
							],
							"actions": [],
							"sid": 448401131464446,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "pick-by-comparison",
											"objectClass": "System",
											"sid": 107097053446154,
											"parameters": {
												"object": "SpriteFont",
												"expression": "left(SpriteFont.ID, 6)",
												"comparison": 0,
												"value": "\"choice\""
											}
										},
										{
											"id": "compare-two-values",
											"objectClass": "System",
											"sid": 253251639216014,
											"parameters": {
												"first-value": "Dialogue_ChoiceIndex",
												"comparison": 2,
												"second-value": "SpriteFont.PickedCount-1"
											}
										}
									],
									"actions": [
										{
											"id": "add-to-eventvar",
											"objectClass": "System",
											"sid": 400155364005494,
											"parameters": {
												"variable": "Dialogue_ChoiceIndex",
												"value": "1"
											}
										}
									],
									"sid": 792934741910508,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "pick-by-comparison",
													"objectClass": "System",
													"sid": 745327508451021,
													"parameters": {
														"object": "SpriteFont",
														"expression": "SpriteFont.ID",
														"comparison": 0,
														"value": "\"choice\" & Dialogue_ChoiceIndex"
													}
												},
												{
													"id": "is-visible",
													"objectClass": "SpriteFont",
													"sid": 271968792808084
												}
											],
											"actions": [
												{
													"id": "set-position",
													"objectClass": "ChoiceSelector",
													"sid": 346295999319556,
													"parameters": {
														"x": "SpriteFont.X - DIALOGUE_MARGIN / 2",
														"y": "SpriteFont.Y - DIALOGUE_MARGIN / 2"
													}
												},
												{
													"id": "set-size",
													"objectClass": "ChoiceSelector",
													"sid": 734319258395878,
													"parameters": {
														"width": "min(SpriteFont.TextWidth + DIALOGUE_MARGIN, DIALOGUE_WIDTH - DIALOGUE_MARGIN * 2 - DIALOGUE_ARROWSIZE)",
														"height": "SpriteFont.TextHeight + DIALOGUE_MARGIN"
													}
												},
												{
													"id": "set-instvar-value",
													"objectClass": "ChoiceSelector",
													"sid": 895873799021920,
													"parameters": {
														"instance-variable": "params",
														"value": "mid(SpriteFont.ID, 6, len(SpriteFont.ID) - 6)"
													}
												}
											],
											"sid": 207504053609511
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 476530458821901
												}
											],
											"actions": [],
											"sid": 490002243193628,
											"children": [
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "is-visible",
															"objectClass": "SpriteFont",
															"sid": 333042090150457
														},
														{
															"id": "for-each-ordered",
															"objectClass": "System",
															"sid": 629790179432988,
															"parameters": {
																"object": "SpriteFont",
																"expression": "SpriteFont.Y",
																"order": "ascending"
															}
														}
													],
													"actions": [
														{
															"id": "set-eventvar-value",
															"objectClass": "System",
															"sid": 357580226090172,
															"parameters": {
																"variable": "offsetY",
																"value": "SpriteFont.TextHeight"
															}
														},
														{
															"id": "stop-loop",
															"objectClass": "System",
															"sid": 164197341778837
														}
													],
													"sid": 301616996024583
												},
												{
													"eventType": "block",
													"conditions": [],
													"actions": [
														{
															"id": "set-y",
															"objectClass": "SpriteFont",
															"sid": 579802640359870,
															"parameters": {
																"y": "Self.Y - offsetY - DIALOGUE_LINEHEIGHT"
															}
														},
														{
															"callFunction": "Dialogue_HideShowChoices",
															"sid": 666740469423728
														}
													],
													"sid": 252951988762972
												},
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "pick-all",
															"objectClass": "System",
															"sid": 689283486138127,
															"parameters": {
																"object": "SpriteFont"
															}
														},
														{
															"id": "pick-by-comparison",
															"objectClass": "System",
															"sid": 244450922686624,
															"parameters": {
																"object": "SpriteFont",
																"expression": "SpriteFont.ID",
																"comparison": 0,
																"value": "\"choice\" & Dialogue_ChoiceIndex"
															}
														}
													],
													"actions": [
														{
															"id": "set-position",
															"objectClass": "ChoiceSelector",
															"sid": 912270050948082,
															"parameters": {
																"x": "SpriteFont.X - DIALOGUE_MARGIN / 2",
																"y": "SpriteFont.Y - DIALOGUE_MARGIN / 2"
															}
														},
														{
															"id": "set-size",
															"objectClass": "ChoiceSelector",
															"sid": 115626421927519,
															"parameters": {
																"width": "min(SpriteFont.TextWidth + DIALOGUE_MARGIN, DIALOGUE_WIDTH - DIALOGUE_MARGIN * 2 - DIALOGUE_ARROWSIZE)",
																"height": "SpriteFont.TextHeight + DIALOGUE_MARGIN"
															}
														},
														{
															"id": "set-instvar-value",
															"objectClass": "ChoiceSelector",
															"sid": 163073044832628,
															"parameters": {
																"instance-variable": "params",
																"value": "mid(SpriteFont.ID, 6, len(SpriteFont.ID) - 6)"
															}
														}
													],
													"sid": 402054095091695
												}
											]
										}
									]
								}
							]
						}
					]
				},
				{
					"functionName": "Dialogue_ChoiceSelect",
					"functionDescription": "Callback for selecting a choice via touch or normal selection.",
					"functionCategory": "Dialogue - Callback",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "choiceIndex",
							"type": "number",
							"initialValue": "-1",
							"comment": "Use -1 for input callback, internally this is used with other values",
							"sid": 540159654739752
						}
					],
					"eventType": "function-block",
					"conditions": [],
					"actions": [],
					"sid": 366566705613514,
					"children": [
						{
							"eventType": "variable",
							"name": "choiceFork",
							"type": "string",
							"initialValue": "",
							"comment": "",
							"isStatic": false,
							"isConstant": false,
							"sid": 589682381695745
						},
						{
							"eventType": "block",
							"conditions": [],
							"actions": [
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 771578665288044,
									"parameters": {
										"variable": "Dialogue_ChoiceIndex",
										"value": "choiceIndex = -1 ? int(ChoiceSelector.params) : choiceIndex"
									}
								}
							],
							"sid": 136357889500155
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "pick-by-comparison",
									"objectClass": "System",
									"sid": 233024934313339,
									"parameters": {
										"object": "SpriteFont",
										"expression": "SpriteFont.ID",
										"comparison": 0,
										"value": "\"choice\" & Dialogue_ChoiceIndex"
									}
								}
							],
							"actions": [
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 391209316062502,
									"parameters": {
										"variable": "choiceFork",
										"value": "SpriteFont.ChoiceFork"
									}
								}
							],
							"sid": 259238234016671
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "pick-by-comparison",
									"objectClass": "System",
									"sid": 976898740541431,
									"parameters": {
										"object": "SpriteFont",
										"expression": "left(SpriteFont.ID, 6)",
										"comparison": 0,
										"value": "\"choice\""
									}
								}
							],
							"actions": [
								{
									"id": "destroy",
									"objectClass": "SpriteFont",
									"sid": 170145853139766
								},
								{
									"id": "destroy",
									"objectClass": "ChoiceSelector",
									"sid": 826910789514461
								},
								{
									"id": "destroy",
									"objectClass": "UpArrow",
									"sid": 748573893120891
								},
								{
									"id": "destroy",
									"objectClass": "DownArrow",
									"sid": 501864292062090
								}
							],
							"sid": 876883765825295
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "pick-by-comparison",
									"objectClass": "System",
									"sid": 104466819164749,
									"parameters": {
										"object": "SpriteFont",
										"expression": "SpriteFont.ID",
										"comparison": 0,
										"value": "\"dialogue\""
									}
								}
							],
							"actions": [
								{
									"id": "set-visible",
									"objectClass": "SpriteFont",
									"sid": 367933849852143,
									"parameters": {
										"visibility": "visible"
									}
								}
							],
							"sid": 471663702199927,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "is-number-nan",
											"objectClass": "System",
											"sid": 646783940672711,
											"parameters": {
												"number": "choiceFork"
											},
											"isInverted": true
										},
										{
											"id": "compare-eventvar",
											"objectClass": "System",
											"sid": 857694154532230,
											"parameters": {
												"variable": "choiceFork",
												"comparison": 0,
												"value": "\"\""
											}
										}
									],
									"actions": [],
									"sid": 216869508912233,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-eventvar",
													"objectClass": "System",
													"sid": 312545275295351,
													"parameters": {
														"variable": "choiceFork",
														"comparison": 3,
														"value": "\"0\""
													}
												}
											],
											"actions": [
												{
													"callFunction": "Dialogue_End",
													"sid": 101981642075878
												}
											],
											"sid": 716090825223813
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 204392088577675
												}
											],
											"actions": [
												{
													"id": "set-eventvar-value",
													"objectClass": "System",
													"sid": 102844404822341,
													"parameters": {
														"variable": "Dialogue_SequenceIndex",
														"value": "int(choiceFork)-1"
													}
												}
											],
											"sid": 655160066763536,
											"children": [
												{
													"eventType": "comment",
													"text": "Start next sequence in the dialogue"
												},
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "compare-eventvar",
															"objectClass": "System",
															"sid": 669831450268223,
															"parameters": {
																"variable": "Dialogue_SequenceIndex",
																"comparison": 2,
																"value": "DialogueData.Width"
															}
														}
													],
													"actions": [
														{
															"callFunction": "Dialogue_StartSequence",
															"sid": 363732445233500,
															"parameters": [
																"Dialogue_SequenceIndex"
															]
														}
													],
													"sid": 663564098461433
												},
												{
													"eventType": "comment",
													"text": "Dialogue ends here"
												},
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "else",
															"objectClass": "System",
															"sid": 373415917263540
														}
													],
													"actions": [
														{
															"callFunction": "Dialogue_End",
															"sid": 825119014582740
														}
													],
													"sid": 375319660518787
												}
											]
										}
									],
									"isOrBlock": true
								},
								{
									"eventType": "comment",
									"text": "Start a new a dialogue if key exists"
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 133826907396527
										},
										{
											"id": "has-key",
											"objectClass": "DialogueDictionary",
											"sid": 650857229204777,
											"parameters": {
												"key": "choiceFork"
											}
										}
									],
									"actions": [
										{
											"callFunction": "Dialogue_End",
											"sid": 733589287624304
										},
										{
											"callFunction": "Dialogue_StartDialogue",
											"sid": 546030853825886,
											"parameters": [
												"choiceFork"
											]
										}
									],
									"sid": 918965168658791
								},
								{
									"eventType": "comment",
									"text": "Otherwise end"
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 272752592094376
										}
									],
									"actions": [
										{
											"callFunction": "Dialogue_End",
											"sid": 691915506495057
										}
									],
									"sid": 173621484981197
								}
							]
						}
					]
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-tap-object",
							"objectClass": "Touch",
							"sid": 600852397692052,
							"parameters": {
								"object": "ChoiceSelector"
							}
						},
						{
							"id": "on-double-tap-object",
							"objectClass": "Touch",
							"sid": 229955707624126,
							"parameters": {
								"object": "ChoiceSelector"
							}
						}
					],
					"actions": [],
					"sid": 458116167346957,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-eventvar",
									"objectClass": "System",
									"sid": 507509828663350,
									"parameters": {
										"variable": "Dialogue_TapChoice",
										"comparison": 0,
										"value": "1"
									}
								},
								{
									"id": "compare-eventvar",
									"objectClass": "System",
									"sid": 878818372376720,
									"parameters": {
										"variable": "Dialogue_WaitForChoice",
										"comparison": 0,
										"value": "1"
									}
								}
							],
							"actions": [],
							"sid": 371662809442507,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-instance-variable",
											"objectClass": "ChoiceSelector",
											"sid": 788934771859772,
											"parameters": {
												"instance-variable": "params",
												"comparison": 1,
												"value": "\"\""
											}
										}
									],
									"actions": [
										{
											"callFunction": "Dialogue_ChoiceSelect",
											"sid": 572689198923339,
											"parameters": [
												"int(ChoiceSelector.params)"
											]
										}
									],
									"sid": 459045542670553
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 257880150627039
										}
									],
									"actions": [
										{
											"id": "call-mapped-function",
											"objectClass": "Functions",
											"sid": 224707836424665,
											"parameters": {
												"name": "\"Dialogue\"",
												"string": "ChoiceSelector.callback",
												"forward-params": "0"
											}
										}
									],
									"sid": 538567199530738
								}
							]
						}
					],
					"isOrBlock": true
				},
				{
					"eventType": "comment",
					"text": "This function checks for commands at the current char index in the \"DialogueCommands\" dictionnary. They will all be executed until no more commands are found or until a pause or wait command were issued."
				},
				{
					"functionName": "Dialogue_CheckCommands",
					"functionDescription": "This function checks for commands at the current char index in the \"DialogueCommands\" dictionnary. They will all be executed until no more commands are found or until a pause or wait command were issued.",
					"functionCategory": "Dialogue - Internal",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [],
					"eventType": "function-block",
					"conditions": [],
					"actions": [],
					"sid": 829482561548676,
					"children": [
						{
							"eventType": "variable",
							"name": "commandText",
							"type": "string",
							"initialValue": "",
							"comment": "",
							"isStatic": false,
							"isConstant": false,
							"sid": 702816532325085
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "while",
									"objectClass": "System",
									"sid": 446689797401554
								},
								{
									"id": "has-key",
									"objectClass": "DialogueCommands",
									"sid": 659181645263847,
									"parameters": {
										"key": "Dialogue_CharIndex & \".\" & Dialogue_CommandNumber"
									}
								},
								{
									"id": "compare-eventvar",
									"objectClass": "System",
									"sid": 576724486203368,
									"parameters": {
										"variable": "Dialogue_WaitForInput",
										"comparison": 0,
										"value": "0"
									}
								},
								{
									"id": "compare-eventvar",
									"objectClass": "System",
									"sid": 366194092802789,
									"parameters": {
										"variable": "Dialogue_WaitForChoice",
										"comparison": 0,
										"value": "0"
									}
								},
								{
									"id": "compare-eventvar",
									"objectClass": "System",
									"sid": 485482884373450,
									"parameters": {
										"variable": "Dialogue_Timer",
										"comparison": 3,
										"value": "0"
									}
								}
							],
							"actions": [
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 669195170776013,
									"parameters": {
										"variable": "commandText",
										"value": "DialogueCommands.Get(Dialogue_CharIndex & \".\" & Dialogue_CommandNumber)"
									}
								},
								{
									"id": "delete-key",
									"objectClass": "DialogueCommands",
									"sid": 212447998507190,
									"parameters": {
										"key": "Dialogue_CharIndex & \".\" & Dialogue_CommandNumber"
									}
								},
								{
									"id": "add-to-eventvar",
									"objectClass": "System",
									"sid": 944324852489518,
									"parameters": {
										"variable": "Dialogue_CommandNumber",
										"value": "1"
									}
								},
								{
									"callFunction": "Dialogue_ProcessCommand",
									"sid": 851290717842563,
									"parameters": [
										"commandText"
									]
								}
							],
							"sid": 443358960425062
						}
					]
				},
				{
					"eventType": "comment",
					"text": "This is the core function that fetch and display a character at a time and execute commands if applicable at the current char index."
				},
				{
					"functionName": "Dialogue_NextChar",
					"functionDescription": "This is the core function that fetch and display a character at a time and execute commands if applicable at the current char index.",
					"functionCategory": "Dialogue - Internal",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [],
					"eventType": "function-block",
					"conditions": [
						{
							"id": "pick-by-unique-id",
							"objectClass": "SpriteFont",
							"sid": 827682152904870,
							"parameters": {
								"unique-id": "Dialogue_SpriteFontUID"
							}
						}
					],
					"actions": [],
					"sid": 217552416115796,
					"children": [
						{
							"eventType": "comment",
							"text": "Check for commands and execute them if any before each character unless skipping\r\nYou might consider removing this condition if you wish for commands to execute even while skipping. You can also move this condition onto commands you wish to be skipped."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-eventvar",
									"objectClass": "System",
									"sid": 805196431975776,
									"parameters": {
										"variable": "Dialogue_SkipSequence",
										"comparison": 1,
										"value": "1"
									}
								}
							],
							"actions": [
								{
									"callFunction": "Dialogue_CheckCommands",
									"sid": 334237179142634
								}
							],
							"sid": 453770025176168
						},
						{
							"eventType": "comment",
							"text": "Check if the call is valid, otherwise it will simply end the recursivity."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-eventvar",
									"objectClass": "System",
									"sid": 272009736146622,
									"parameters": {
										"variable": "Dialogue_Timer",
										"comparison": 3,
										"value": "0"
									}
								},
								{
									"id": "compare-eventvar",
									"objectClass": "System",
									"sid": 757128533490918,
									"parameters": {
										"variable": "Dialogue_SkipSequence",
										"comparison": 0,
										"value": "1"
									}
								}
							],
							"actions": [],
							"sid": 946139632743084,
							"children": [
								{
									"eventType": "comment",
									"text": "Skips newlines on a new page"
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-eventvar",
											"objectClass": "System",
											"sid": 454844139700123,
											"parameters": {
												"variable": "Dialogue_CharIndex",
												"comparison": 0,
												"value": "Dialogue_StartCharIndex"
											}
										},
										{
											"id": "compare-two-values",
											"objectClass": "System",
											"sid": 190834680123408,
											"parameters": {
												"first-value": "mid(Dialogue_ProcessedText, Dialogue_CharIndex, 1)",
												"comparison": 0,
												"second-value": "newline"
											}
										}
									],
									"actions": [
										{
											"id": "add-to-eventvar",
											"objectClass": "System",
											"sid": 831465165195558,
											"parameters": {
												"variable": "Dialogue_CharIndex",
												"value": "1"
											}
										},
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 842967841529000,
											"parameters": {
												"variable": "Dialogue_CommandNumber",
												"value": "0"
											}
										},
										{
											"id": "add-to-eventvar",
											"objectClass": "System",
											"sid": 581040691641044,
											"parameters": {
												"variable": "Dialogue_StartCharIndex",
												"value": "1"
											}
										},
										{
											"callFunction": "Dialogue_NextChar",
											"sid": 903677026578654
										}
									],
									"sid": 336149678826919
								},
								{
									"eventType": "comment",
									"text": "Skips whitespaces"
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 438114083315786
										},
										{
											"id": "compare-eventvar",
											"objectClass": "System",
											"sid": 983639805669916,
											"parameters": {
												"variable": "Dialogue_CharIndex",
												"comparison": 2,
												"value": "len(Dialogue_ProcessedText)"
											}
										},
										{
											"id": "compare-two-values",
											"objectClass": "System",
											"sid": 193238931402191,
											"parameters": {
												"first-value": "mid(Dialogue_ProcessedText, Dialogue_CharIndex, 1)",
												"comparison": 0,
												"second-value": "\" \""
											}
										},
										{
											"id": "compare-eventvar",
											"objectClass": "System",
											"sid": 813196831633090,
											"parameters": {
												"variable": "Dialogue_WaitForInput",
												"comparison": 0,
												"value": "0"
											}
										},
										{
											"id": "compare-eventvar",
											"objectClass": "System",
											"sid": 598607449733678,
											"parameters": {
												"variable": "Dialogue_WaitForChoice",
												"comparison": 0,
												"value": "0"
											}
										}
									],
									"actions": [
										{
											"id": "add-to-eventvar",
											"objectClass": "System",
											"sid": 582640945176111,
											"parameters": {
												"variable": "Dialogue_CharIndex",
												"value": "1"
											}
										},
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 286166744061460,
											"parameters": {
												"variable": "Dialogue_CommandNumber",
												"value": "0"
											}
										},
										{
											"id": "set-text",
											"objectClass": "SpriteFont",
											"sid": 420386177647425,
											"parameters": {
												"text": "Dialogue_CurrentTags & mid(Dialogue_ProcessedText, Dialogue_StartCharIndex, Dialogue_CharIndex - Dialogue_StartCharIndex)"
											}
										},
										{
											"callFunction": "Dialogue_NextChar",
											"sid": 640329833590706
										}
									],
									"sid": 291282600357093
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 416655489683821
										},
										{
											"id": "compare-eventvar",
											"objectClass": "System",
											"sid": 190937343073050,
											"parameters": {
												"variable": "Dialogue_CharIndex",
												"comparison": 2,
												"value": "len(Dialogue_ProcessedText)"
											}
										},
										{
											"id": "compare-two-values",
											"objectClass": "System",
											"sid": 849508546821877,
											"parameters": {
												"first-value": "mid(Dialogue_ProcessedText, Dialogue_CharIndex, 1)",
												"comparison": 0,
												"second-value": "newline"
											}
										},
										{
											"id": "compare-eventvar",
											"objectClass": "System",
											"sid": 314692627597693,
											"parameters": {
												"variable": "Dialogue_WaitForInput",
												"comparison": 0,
												"value": "0"
											}
										},
										{
											"id": "compare-eventvar",
											"objectClass": "System",
											"sid": 780896095438096,
											"parameters": {
												"variable": "Dialogue_WaitForChoice",
												"comparison": 0,
												"value": "0"
											}
										}
									],
									"actions": [
										{
											"id": "add-to-eventvar",
											"objectClass": "System",
											"sid": 372903330236965,
											"parameters": {
												"variable": "Dialogue_CharIndex",
												"value": "1"
											}
										},
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 384516719721344,
											"parameters": {
												"variable": "Dialogue_CommandNumber",
												"value": "0"
											}
										},
										{
											"id": "set-text",
											"objectClass": "SpriteFont",
											"sid": 854940308382815,
											"parameters": {
												"text": "Dialogue_CurrentTags & mid(Dialogue_ProcessedText, Dialogue_StartCharIndex, Dialogue_CharIndex - Dialogue_StartCharIndex)"
											}
										}
									],
									"sid": 377276632449246,
									"children": [
										{
											"eventType": "comment",
											"text": "Check for overflow before"
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-two-values",
													"objectClass": "System",
													"sid": 254891225652896,
													"parameters": {
														"first-value": "SpriteFont.TextHeight",
														"comparison": 4,
														"second-value": "DIALOGUE_HEIGHT - DIALOGUE_MARGIN * 2 - DIALOGUE_LINEHEIGHT"
													}
												}
											],
											"actions": [
												{
													"id": "set-eventvar-value",
													"objectClass": "System",
													"sid": 420286979330453,
													"parameters": {
														"variable": "Dialogue_WaitForInput",
														"value": "1"
													}
												},
												{
													"id": "set-eventvar-value",
													"objectClass": "System",
													"sid": 485849194758279,
													"parameters": {
														"variable": "Dialogue_TextOverflow",
														"value": "1"
													}
												}
											],
											"sid": 415639172201720
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 371401741098902
												}
											],
											"actions": [
												{
													"callFunction": "Dialogue_NextChar",
													"sid": 812764206724676
												}
											],
											"sid": 567346296184016
										}
									]
								},
								{
									"eventType": "comment",
									"text": "Check for BB code"
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 551204131165965
										},
										{
											"id": "compare-eventvar",
											"objectClass": "System",
											"sid": 123863800036767,
											"parameters": {
												"variable": "Dialogue_CharIndex",
												"comparison": 2,
												"value": "len(Dialogue_ProcessedText)"
											}
										},
										{
											"id": "compare-two-values",
											"objectClass": "System",
											"sid": 557992427871547,
											"parameters": {
												"first-value": "mid(Dialogue_ProcessedText, Dialogue_CharIndex, 1)",
												"comparison": 0,
												"second-value": "\"[\""
											}
										},
										{
											"id": "compare-eventvar",
											"objectClass": "System",
											"sid": 803695001005403,
											"parameters": {
												"variable": "Dialogue_WaitForInput",
												"comparison": 0,
												"value": "0"
											}
										},
										{
											"id": "compare-eventvar",
											"objectClass": "System",
											"sid": 254424496183088,
											"parameters": {
												"variable": "Dialogue_WaitForChoice",
												"comparison": 0,
												"value": "0"
											}
										}
									],
									"actions": [],
									"sid": 217929094742861,
									"children": [
										{
											"eventType": "variable",
											"name": "tag",
											"type": "string",
											"initialValue": "",
											"comment": "",
											"isStatic": false,
											"isConstant": false,
											"sid": 208286461254617
										},
										{
											"eventType": "variable",
											"name": "tagWithOption",
											"type": "string",
											"initialValue": "",
											"comment": "",
											"isStatic": false,
											"isConstant": false,
											"sid": 619639493060521
										},
										{
											"eventType": "variable",
											"name": "remainingText",
											"type": "string",
											"initialValue": "",
											"comment": "",
											"isStatic": false,
											"isConstant": false,
											"sid": 485268860907410
										},
										{
											"eventType": "block",
											"conditions": [],
											"actions": [
												{
													"id": "set-eventvar-value",
													"objectClass": "System",
													"sid": 804690720420869,
													"parameters": {
														"variable": "remainingText",
														"value": "right(Dialogue_ProcessedText, len(Dialogue_ProcessedText) - Dialogue_CharIndex)"
													}
												}
											],
											"sid": 635011281776108
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-two-values",
													"objectClass": "System",
													"sid": 246480028084371,
													"parameters": {
														"first-value": "RegexMatchCount(remainingText, Dialogue_OpeningBBTagsPattern, \"i\")",
														"comparison": 5,
														"second-value": "1"
													}
												}
											],
											"actions": [
												{
													"id": "set-eventvar-value",
													"objectClass": "System",
													"sid": 544379261624323,
													"parameters": {
														"variable": "tag",
														"value": "RegexMatchAt(remainingText, Dialogue_OpeningBBTagsPattern, \"i\", 2)"
													}
												},
												{
													"id": "set-eventvar-value",
													"objectClass": "System",
													"sid": 421355140926625,
													"parameters": {
														"variable": "tagWithOption",
														"value": "RegexMatchAt(remainingText, Dialogue_OpeningBBTagsPattern, \"i\", 1)"
													}
												},
												{
													"id": "add-to-eventvar",
													"objectClass": "System",
													"sid": 867810823454875,
													"parameters": {
														"variable": "Dialogue_CharIndex",
														"value": "len(tagWithOption) + 2"
													}
												},
												{
													"id": "set-text",
													"objectClass": "SpriteFont",
													"sid": 614098579527825,
													"parameters": {
														"text": "Dialogue_CurrentTags & mid(Dialogue_ProcessedText, Dialogue_StartCharIndex, Dialogue_CharIndex - Dialogue_StartCharIndex)"
													}
												}
											],
											"sid": 738559553339077
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 360156064568502
												},
												{
													"id": "compare-two-values",
													"objectClass": "System",
													"sid": 890923150710903,
													"parameters": {
														"first-value": "RegexMatchCount(remainingText, Dialogue_ClosingBBTagsPattern, \"i\")",
														"comparison": 5,
														"second-value": "1"
													}
												}
											],
											"actions": [
												{
													"id": "set-eventvar-value",
													"objectClass": "System",
													"sid": 270715404881002,
													"parameters": {
														"variable": "tag",
														"value": "RegexMatchAt(remainingText, Dialogue_ClosingBBTagsPattern, \"i\", 1)"
													}
												},
												{
													"id": "add-to-eventvar",
													"objectClass": "System",
													"sid": 641076648500314,
													"parameters": {
														"variable": "Dialogue_CharIndex",
														"value": "len(tag) + 3"
													}
												},
												{
													"id": "set-text",
													"objectClass": "SpriteFont",
													"sid": 943309051990893,
													"parameters": {
														"text": "Dialogue_CurrentTags & mid(Dialogue_ProcessedText, Dialogue_StartCharIndex, Dialogue_CharIndex - Dialogue_StartCharIndex)"
													}
												}
											],
											"sid": 778094450574226
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 925573606979138
												}
											],
											"actions": [
												{
													"id": "add-to-eventvar",
													"objectClass": "System",
													"sid": 648999864649597,
													"parameters": {
														"variable": "Dialogue_CharIndex",
														"value": "1"
													}
												},
												{
													"callFunction": "Dialogue_NextChar",
													"sid": 867740727319737
												}
											],
											"sid": 567958153823648
										}
									]
								},
								{
									"eventType": "comment",
									"text": "Add normal character"
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 574952700250082
										},
										{
											"id": "compare-eventvar",
											"objectClass": "System",
											"sid": 751130501459468,
											"parameters": {
												"variable": "Dialogue_WaitForInput",
												"comparison": 0,
												"value": "0"
											}
										},
										{
											"id": "compare-eventvar",
											"objectClass": "System",
											"sid": 268847904471937,
											"parameters": {
												"variable": "Dialogue_WaitForChoice",
												"comparison": 0,
												"value": "0"
											}
										}
									],
									"actions": [],
									"sid": 456783919825886,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-eventvar",
													"objectClass": "System",
													"sid": 348972272951904,
													"parameters": {
														"variable": "Dialogue_CharIndex",
														"comparison": 2,
														"value": "len(Dialogue_ProcessedText)"
													}
												}
											],
											"actions": [
												{
													"id": "add-to-eventvar",
													"objectClass": "System",
													"sid": 438836437743275,
													"parameters": {
														"variable": "Dialogue_CharIndex",
														"value": "1"
													}
												},
												{
													"id": "set-eventvar-value",
													"objectClass": "System",
													"sid": 262237471715463,
													"parameters": {
														"variable": "Dialogue_CommandNumber",
														"value": "0"
													}
												},
												{
													"id": "set-text",
													"objectClass": "SpriteFont",
													"sid": 331018053091227,
													"parameters": {
														"text": "Dialogue_CurrentTags & mid(Dialogue_ProcessedText, Dialogue_StartCharIndex, Dialogue_CharIndex - Dialogue_StartCharIndex)"
													}
												},
												{
													"id": "add-to-eventvar",
													"objectClass": "System",
													"sid": 193671194528977,
													"parameters": {
														"variable": "Dialogue_Timer",
														"value": "Dialogue_SequenceCharDelay"
													}
												}
											],
											"sid": 275969271377966
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 813259320462774
												}
											],
											"actions": [
												{
													"id": "add-to-eventvar",
													"objectClass": "System",
													"sid": 319548266838277,
													"parameters": {
														"variable": "Dialogue_CharIndex",
														"value": "1"
													}
												},
												{
													"id": "add-to-eventvar",
													"objectClass": "System",
													"sid": 274519817529414,
													"parameters": {
														"variable": "Dialogue_Timer",
														"value": "Dialogue_SequenceCharDelay"
													}
												}
											],
											"sid": 340639170227612
										},
										{
											"eventType": "comment",
											"text": "Check for overflow before"
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-two-values",
													"objectClass": "System",
													"sid": 511688881582481,
													"parameters": {
														"first-value": "SpriteFont.TextHeight",
														"comparison": 4,
														"second-value": "DIALOGUE_HEIGHT - DIALOGUE_MARGIN * 2"
													}
												}
											],
											"actions": [
												{
													"id": "set-eventvar-value",
													"objectClass": "System",
													"sid": 914832596237985,
													"parameters": {
														"variable": "Dialogue_Timer",
														"value": "0"
													}
												},
												{
													"id": "set-eventvar-value",
													"objectClass": "System",
													"sid": 723765928861168,
													"parameters": {
														"variable": "Dialogue_WaitForInput",
														"value": "1"
													}
												},
												{
													"id": "set-eventvar-value",
													"objectClass": "System",
													"sid": 886508180797760,
													"parameters": {
														"variable": "Dialogue_TextOverflow",
														"value": "1"
													}
												},
												{
													"id": "add-to-eventvar",
													"objectClass": "System",
													"sid": 674016202307252,
													"parameters": {
														"variable": "Dialogue_CharIndex",
														"value": "-1"
													}
												},
												{
													"id": "set-text",
													"objectClass": "SpriteFont",
													"sid": 444910700915138,
													"parameters": {
														"text": "Dialogue_CurrentTags & mid(Dialogue_ProcessedText, Dialogue_StartCharIndex, Dialogue_CharIndex - Dialogue_StartCharIndex)"
													}
												}
											],
											"sid": 500029178811220
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 607979881661030
												},
												{
													"id": "compare-eventvar",
													"objectClass": "System",
													"sid": 845058053602129,
													"parameters": {
														"variable": "Dialogue_CharIndex",
														"comparison": 2,
														"value": "len(Dialogue_ProcessedText)"
													}
												}
											],
											"actions": [
												{
													"callFunction": "Dialogue_NextChar",
													"sid": 105809215640564
												}
											],
											"sid": 697450378422885
										}
									]
								},
								{
									"eventType": "comment",
									"text": "Else -> Do nothing (Ends recursivity when waiting for input)"
								}
							],
							"isOrBlock": true
						}
					]
				},
				{
					"eventType": "comment",
					"text": "Used to return the text to display. It will also insert variables in text and parse commands from the raw text value."
				},
				{
					"functionName": "Dialogue_ProcessText",
					"functionDescription": "Used to return the text to display. It will also insert variables in text and parse commands from the raw text value.",
					"functionCategory": "Dialogue - Internal",
					"functionReturnType": "string",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "dialogueWidth",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"sid": 902216656405852
						}
					],
					"eventType": "function-block",
					"conditions": [],
					"actions": [],
					"sid": 470853126039213,
					"children": [
						{
							"eventType": "variable",
							"name": "matchCount",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"isStatic": false,
							"isConstant": false,
							"sid": 243749909332588
						},
						{
							"eventType": "variable",
							"name": "tempText",
							"type": "string",
							"initialValue": "",
							"comment": "",
							"isStatic": false,
							"isConstant": false,
							"sid": 297340325563889
						},
						{
							"eventType": "variable",
							"name": "currentLine",
							"type": "string",
							"initialValue": "",
							"comment": "",
							"isStatic": false,
							"isConstant": false,
							"sid": 970019885106603
						},
						{
							"eventType": "variable",
							"name": "returnText",
							"type": "string",
							"initialValue": "",
							"comment": "",
							"isStatic": false,
							"isConstant": false,
							"sid": 540585948516209
						},
						{
							"eventType": "block",
							"conditions": [],
							"actions": [
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 488208632265665,
									"parameters": {
										"variable": "tempText",
										"value": "DialogueData.At(Dialogue_SequenceIndex, 0)"
									}
								}
							],
							"sid": 212876804532620
						},
						{
							"eventType": "comment",
							"text": "Insert variables in text, if any (disable if you don't plan on using it)\r\nVariables can be stored elsewhere than the provided \"GameVariables\" dictionnary, but this event should then revised. Feel free to use any other data plugin that use a key/value format ! (HashTable and the likes)"
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "while",
									"objectClass": "System",
									"sid": 958033822075358
								},
								{
									"id": "compare-two-values",
									"objectClass": "System",
									"sid": 486131923918656,
									"parameters": {
										"first-value": "RegexMatchCount(tempText, DIALOGUE_REGEX_VARIABLES, \"\")",
										"comparison": 4,
										"second-value": "0"
									}
								}
							],
							"actions": [],
							"sid": 766040208249664,
							"children": [
								{
									"eventType": "variable",
									"name": "varKey",
									"type": "string",
									"initialValue": "",
									"comment": "",
									"isStatic": false,
									"isConstant": false,
									"sid": 819806085691299
								},
								{
									"eventType": "block",
									"conditions": [],
									"actions": [
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 510491147393516,
											"parameters": {
												"variable": "varKey",
												"value": "RegexMatchAt(tempText, DIALOGUE_REGEX_VARIABLES, \"\", 0)"
											}
										},
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 815928220746059,
											"parameters": {
												"variable": "varKey",
												"value": "mid(varKey, 2, len(varKey) - 3)"
											}
										}
									],
									"sid": 244821499191912
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "has-key",
											"objectClass": "GameVariables",
											"sid": 406988828666050,
											"parameters": {
												"key": "varKey"
											}
										}
									],
									"actions": [
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 372077023614162,
											"parameters": {
												"variable": "tempText",
												"value": "RegexReplace(tempText, DIALOGUE_REGEX_VARIABLES, \"\", GameVariables.Get(varKey))"
											}
										}
									],
									"sid": 818500994017356
								},
								{
									"eventType": "comment",
									"text": "Variable not found, we remove the braces so the loop continue"
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 274501392963867
										}
									],
									"actions": [
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 238461497647701,
											"parameters": {
												"variable": "tempText",
												"value": "RegexReplace(tempText, DIALOGUE_REGEX_VARIABLES, \"\", varKey)"
											}
										}
									],
									"sid": 540200529555194
								}
							]
						},
						{
							"eventType": "comment",
							"text": "Build command list (disable if you don't plan on using it)"
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "while",
									"objectClass": "System",
									"sid": 307632246620851
								},
								{
									"id": "compare-two-values",
									"objectClass": "System",
									"sid": 427508080443148,
									"parameters": {
										"first-value": "RegexMatchCount(tempText, DIALOGUE_REGEX_BRACES, \"\")",
										"comparison": 4,
										"second-value": "0"
									}
								}
							],
							"actions": [],
							"sid": 948887143347895,
							"children": [
								{
									"eventType": "variable",
									"name": "commandText",
									"type": "string",
									"initialValue": "",
									"comment": "",
									"isStatic": false,
									"isConstant": false,
									"sid": 681968227309367
								},
								{
									"eventType": "variable",
									"name": "commandCharIndex",
									"type": "number",
									"initialValue": "-1",
									"comment": "",
									"isStatic": false,
									"isConstant": false,
									"sid": 660967670878548
								},
								{
									"eventType": "variable",
									"name": "commandNumber",
									"type": "number",
									"initialValue": "0",
									"comment": "",
									"isStatic": false,
									"isConstant": false,
									"sid": 437033113596272
								},
								{
									"eventType": "block",
									"conditions": [],
									"actions": [
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 492980073063988,
											"parameters": {
												"variable": "commandText",
												"value": "RegexMatchAt(tempText, DIALOGUE_REGEX_BRACES, \"\", 0)"
											}
										},
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 762704845344645,
											"parameters": {
												"variable": "commandText",
												"value": "mid(commandText, 1, len(commandText) - 2)"
											}
										},
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 173181489463512,
											"parameters": {
												"variable": "commandCharIndex",
												"value": "RegexSearch(tempText, DIALOGUE_REGEX_BRACES, \"\")"
											}
										},
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 842766008017832,
											"parameters": {
												"variable": "tempText",
												"value": "RegexReplace(tempText, DIALOGUE_REGEX_BRACES, \"\", \"\")"
											}
										}
									],
									"sid": 625343313093111
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-eventvar",
											"objectClass": "System",
											"sid": 338643376078740,
											"parameters": {
												"variable": "commandText",
												"comparison": 1,
												"value": "\"\""
											}
										}
									],
									"actions": [],
									"sid": 120518374019375,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "while",
													"objectClass": "System",
													"sid": 885171013422230
												},
												{
													"id": "has-key",
													"objectClass": "DialogueCommands",
													"sid": 817487706621552,
													"parameters": {
														"key": "commandCharIndex & \".\" & commandNumber"
													}
												}
											],
											"actions": [
												{
													"id": "add-to-eventvar",
													"objectClass": "System",
													"sid": 521560131246088,
													"parameters": {
														"variable": "commandNumber",
														"value": "1"
													}
												}
											],
											"sid": 353692070956094
										},
										{
											"eventType": "block",
											"conditions": [],
											"actions": [
												{
													"id": "add-key",
													"objectClass": "DialogueCommands",
													"sid": 618748950080884,
													"parameters": {
														"key": "commandCharIndex & \".\" & commandNumber",
														"value": "commandText"
													}
												}
											],
											"sid": 965789527860032
										}
									]
								}
							]
						},
						{
							"eventType": "comment",
							"text": "Process remaining text so it insert \"newlines\" to obtain perfect line wrapping"
						},
						{
							"eventType": "block",
							"conditions": [],
							"actions": [
								{
									"id": "create-object",
									"objectClass": "System",
									"sid": 676682045524143,
									"parameters": {
										"object-to-create": "SpriteFont",
										"layer": "0",
										"x": "-1000",
										"y": "-1000",
										"create-hierarchy": false,
										"template-name": "\"\""
									}
								},
								{
									"id": "set-width",
									"objectClass": "SpriteFont",
									"sid": 132356727066521,
									"parameters": {
										"width": "5000"
									}
								},
								{
									"id": "set-text",
									"objectClass": "SpriteFont",
									"sid": 703548413819793,
									"parameters": {
										"text": "\"\""
									}
								},
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 490660061128367,
									"parameters": {
										"variable": "matchCount",
										"value": "RegexMatchCount(tempText, DIALOGUE_REGEX_WORDS, \"g\")"
									}
								}
							],
							"sid": 114269009723547,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "for",
											"objectClass": "System",
											"sid": 693087402749866,
											"parameters": {
												"name": "\"matches\"",
												"start-index": "0",
												"end-index": "matchCount - 1"
											}
										}
									],
									"actions": [
										{
											"id": "set-text",
											"objectClass": "SpriteFont",
											"sid": 971079604950783,
											"parameters": {
												"text": "Self.Text & RegexMatchAt(tempText, DIALOGUE_REGEX_WORDS, \"g\", loopindex)"
											}
										}
									],
									"sid": 564152450889232,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-two-values",
													"objectClass": "System",
													"sid": 716953377225921,
													"parameters": {
														"first-value": "SpriteFont.TextWidth",
														"comparison": 4,
														"second-value": "dialogueWidth"
													}
												}
											],
											"actions": [
												{
													"id": "set-eventvar-value",
													"objectClass": "System",
													"sid": 178566024206770,
													"parameters": {
														"variable": "returnText",
														"value": "returnText & trim(right(currentLine, len(currentLine) - len(Dialogue_CurrentTags))) & newline"
													}
												}
											],
											"sid": 112030988519110,
											"children": [
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "repeat",
															"objectClass": "System",
															"sid": 167598598315703,
															"parameters": {
																"count": "RegexMatchCount(currentLine, Dialogue_AnyBBTagsPattern, \"g\")"
															}
														}
													],
													"actions": [
														{
															"id": "set-eventvar-value",
															"objectClass": "System",
															"sid": 510280264063901,
															"parameters": {
																"variable": "Dialogue_CurrentTags",
																"value": "Dialogue_CurrentTags & RegexMatchAt(currentLine, Dialogue_AnyBBTagsPattern, \"g\", loopindex)"
															}
														}
													],
													"sid": 613576308638898
												},
												{
													"eventType": "block",
													"conditions": [],
													"actions": [
														{
															"id": "set-eventvar-value",
															"objectClass": "System",
															"sid": 257331279654936,
															"parameters": {
																"variable": "currentLine",
																"value": "RegexMatchAt(tempText, DIALOGUE_REGEX_WORDS, \"g\", loopindex)"
															}
														},
														{
															"id": "set-text",
															"objectClass": "SpriteFont",
															"sid": 534555565122077,
															"parameters": {
																"text": "Dialogue_CurrentTags & currentLine"
															}
														}
													],
													"sid": 151311872269291
												}
											]
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 226738451411946
												}
											],
											"actions": [
												{
													"id": "set-eventvar-value",
													"objectClass": "System",
													"sid": 591690829442803,
													"parameters": {
														"variable": "currentLine",
														"value": "SpriteFont.Text"
													}
												}
											],
											"sid": 411243083274196
										}
									]
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-two-values",
											"objectClass": "System",
											"sid": 761887828514682,
											"parameters": {
												"first-value": "len(SpriteFont.Text)",
												"comparison": 4,
												"second-value": "0"
											}
										}
									],
									"actions": [
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 331960126418074,
											"parameters": {
												"variable": "returnText",
												"value": "returnText & trim(right(SpriteFont.Text, len(SpriteFont.Text) - len(Dialogue_CurrentTags)))"
											}
										}
									],
									"sid": 689617175874950
								},
								{
									"eventType": "block",
									"conditions": [],
									"actions": [
										{
											"id": "destroy",
											"objectClass": "SpriteFont",
											"sid": 109201712248295
										}
									],
									"sid": 648252245152646
								}
							]
						},
						{
							"eventType": "block",
							"conditions": [],
							"actions": [
								{
									"id": "set-function-return-value",
									"objectClass": "Functions",
									"sid": 856850077854788,
									"parameters": {
										"value": "returnText"
									}
								}
							],
							"sid": 213853848405475,
							"children": [
								{
									"eventType": "comment",
									"text": "Fix for trailing commands, they all get executed at the last character index."
								},
								{
									"eventType": "variable",
									"name": "commandNumber",
									"type": "number",
									"initialValue": "0",
									"comment": "",
									"isStatic": false,
									"isConstant": false,
									"sid": 958703168154221
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "for-each-key",
											"objectClass": "DialogueCommands",
											"sid": 798527905633994
										},
										{
											"id": "compare-two-values",
											"objectClass": "System",
											"sid": 629327330967519,
											"parameters": {
												"first-value": "int(left(DialogueCommands.CurrentKey, find(DialogueCommands.CurrentKey, \".\")))",
												"comparison": 5,
												"second-value": "len(returnText)"
											}
										}
									],
									"actions": [],
									"sid": 807754246634690,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-two-values",
													"objectClass": "System",
													"sid": 123881428983853,
													"parameters": {
														"first-value": "int(left(DialogueCommands.CurrentKey, find(DialogueCommands.CurrentKey, \".\")))",
														"comparison": 0,
														"second-value": "len(returnText)"
													}
												}
											],
											"actions": [
												{
													"id": "add-to-eventvar",
													"objectClass": "System",
													"sid": 715783051302157,
													"parameters": {
														"variable": "commandNumber",
														"value": "1"
													}
												}
											],
											"sid": 283268719380366
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 138017474267683
												}
											],
											"actions": [
												{
													"id": "add-key",
													"objectClass": "DialogueCommands",
													"sid": 221051738838171,
													"parameters": {
														"key": "len(returnText) & \".\" & commandNumber",
														"value": "DialogueCommands.CurrentValue"
													}
												},
												{
													"id": "delete-key",
													"objectClass": "DialogueCommands",
													"sid": 256675964589204,
													"parameters": {
														"key": "DialogueCommands.CurrentKey"
													}
												},
												{
													"id": "add-to-eventvar",
													"objectClass": "System",
													"sid": 189433323094662,
													"parameters": {
														"variable": "commandNumber",
														"value": "1"
													}
												}
											],
											"sid": 289558785730897
										}
									]
								}
							]
						}
					]
				},
				{
					"eventType": "comment",
					"text": "Called to continue dialogue waiting for input. It will also end the dialogue if no sequence remains."
				},
				{
					"functionName": "Dialogue_Continue",
					"functionDescription": "",
					"functionCategory": "Dialogue",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [],
					"eventType": "function-block",
					"conditions": [
						{
							"id": "pick-by-unique-id",
							"objectClass": "SpriteFont",
							"sid": 170627249921673,
							"parameters": {
								"unique-id": "Dialogue_SpriteFontUID"
							}
						}
					],
					"actions": [
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 716069546677313,
							"parameters": {
								"variable": "Dialogue_WaitForInput",
								"value": "0"
							}
						},
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 752431272088847,
							"parameters": {
								"variable": "Dialogue_SkipSequence",
								"value": "0"
							}
						},
						{
							"id": "destroy",
							"objectClass": "ContinueIndicator",
							"sid": 741962695745032
						}
					],
					"sid": 673025595521145,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-eventvar",
									"objectClass": "System",
									"sid": 156815478331749,
									"parameters": {
										"variable": "Dialogue_CharIndex",
										"comparison": 0,
										"value": "len(Dialogue_ProcessedText)+1"
									}
								}
							],
							"actions": [
								{
									"id": "add-to-eventvar",
									"objectClass": "System",
									"sid": 490787359392106,
									"parameters": {
										"variable": "Dialogue_SequenceIndex",
										"value": "1"
									}
								}
							],
							"sid": 226190895658956,
							"children": [
								{
									"eventType": "comment",
									"text": "Start next sequence in the dialogue"
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-eventvar",
											"objectClass": "System",
											"sid": 520947342686933,
											"parameters": {
												"variable": "Dialogue_SequenceIndex",
												"comparison": 2,
												"value": "DialogueData.Width"
											}
										}
									],
									"actions": [
										{
											"callFunction": "Dialogue_StartSequence",
											"sid": 555298572726599,
											"parameters": [
												"Dialogue_SequenceIndex"
											]
										}
									],
									"sid": 470602076322771
								},
								{
									"eventType": "comment",
									"text": "Dialogue ends here"
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 108606863967476
										}
									],
									"actions": [
										{
											"callFunction": "Dialogue_End",
											"sid": 495370020596244
										}
									],
									"sid": 695285111791710
								}
							]
						},
						{
							"eventType": "comment",
							"text": "To continue after a text overflow"
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 895689281630679
								},
								{
									"id": "compare-eventvar",
									"objectClass": "System",
									"sid": 820932264202308,
									"parameters": {
										"variable": "Dialogue_TextOverflow",
										"comparison": 0,
										"value": "1"
									}
								}
							],
							"actions": [
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 905403734258399,
									"parameters": {
										"variable": "Dialogue_Timer",
										"value": "0"
									}
								},
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 964684940397506,
									"parameters": {
										"variable": "Dialogue_LineNumber",
										"value": "0"
									}
								},
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 948471315591909,
									"parameters": {
										"variable": "Dialogue_StartCharIndex",
										"value": "Dialogue_CharIndex"
									}
								},
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 507694285622096,
									"parameters": {
										"variable": "Dialogue_WaitForInput",
										"value": "0"
									}
								},
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 107276686635004,
									"parameters": {
										"variable": "Dialogue_TextOverflow",
										"value": "0"
									}
								}
							],
							"sid": 401082926327934,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "repeat",
											"objectClass": "System",
											"sid": 292034078854906,
											"parameters": {
												"count": "RegexMatchCount(SpriteFont.Text, Dialogue_AnyBBTagsPattern, \"g\")"
											}
										}
									],
									"actions": [
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 910758925800058,
											"parameters": {
												"variable": "Dialogue_CurrentTags",
												"value": "Dialogue_CurrentTags & RegexMatchAt(SpriteFont.Text, Dialogue_AnyBBTagsPattern, \"g\", loopindex)"
											}
										}
									],
									"sid": 919700933886441
								}
							]
						}
					]
				},
				{
					"eventType": "comment",
					"text": "This will fade a music tag. This is used by the special \"fademusic\" text command.\ntag : The tag to fade, duration : Fading time in milliseconds"
				},
				{
					"functionName": "Dialogue_FadeMusicTag",
					"functionDescription": "This will fade a music tag. This is used by the special \"fademusic\" text command. tag : The tag to fade, duration : Fading time in milliseconds (minimum value is 10, which will pretty much just stop the tag)",
					"functionCategory": "Dialogue - Internal",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "tag",
							"type": "string",
							"initialValue": "",
							"comment": "The tag to fade",
							"sid": 523690454478590
						},
						{
							"name": "duration",
							"type": "number",
							"initialValue": "0",
							"comment": "Fading duration in milliseconds (minimum value is 10, which will pretty much just stop the tag)",
							"sid": 499926384104966
						}
					],
					"eventType": "function-block",
					"conditions": [],
					"actions": [],
					"sid": 924721912667438,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-eventvar",
									"objectClass": "System",
									"sid": 847252602901134,
									"parameters": {
										"variable": "duration",
										"comparison": 4,
										"value": "0"
									}
								}
							],
							"actions": [
								{
									"id": "fade-volume",
									"objectClass": "Audio",
									"sid": 143380937661831,
									"parameters": {
										"tag": "tag",
										"db": "-100",
										"duration": "duration / 1000",
										"ending": "stop"
									}
								}
							],
							"sid": 759984676819688
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 116488741868903
								}
							],
							"actions": [
								{
									"id": "stop",
									"objectClass": "Audio",
									"sid": 119497310556071,
									"parameters": {
										"tag": "tag"
									}
								}
							],
							"sid": 537506279401965
						}
					]
				},
				{
					"eventType": "comment",
					"text": "This will simply end all current dialogue."
				},
				{
					"functionName": "Dialogue_End",
					"functionDescription": "This will simply end all current dialogue.",
					"functionCategory": "Dialogue",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [],
					"eventType": "function-block",
					"conditions": [
						{
							"id": "pick-by-unique-id",
							"objectClass": "SpriteFont",
							"sid": 474608921782790,
							"parameters": {
								"unique-id": "Dialogue_SpriteFontUID"
							}
						},
						{
							"id": "pick-by-unique-id",
							"objectClass": "WindowFrame",
							"sid": 932152793457748,
							"parameters": {
								"unique-id": "Dialogue_WindowFrameUID"
							}
						}
					],
					"actions": [
						{
							"id": "set-boolean-eventvar",
							"objectClass": "System",
							"sid": 252710729073699,
							"parameters": {
								"variable": "Dialogue_IsRunning",
								"value": "false"
							}
						},
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 386194572359768,
							"parameters": {
								"variable": "Dialogue_SequenceIndex",
								"value": "-1"
							}
						},
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 633328794525544,
							"parameters": {
								"variable": "Dialogue_WaitForChoice",
								"value": "0"
							}
						},
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 340590814924845,
							"parameters": {
								"variable": "Dialogue_WaitForInput",
								"value": "0"
							}
						},
						{
							"id": "destroy",
							"objectClass": "SpriteFont",
							"sid": 976320500143095
						},
						{
							"id": "destroy",
							"objectClass": "WindowFrame",
							"sid": 318183221410486
						},
						{
							"id": "destroy",
							"objectClass": "ContinueIndicator",
							"sid": 932902699621980
						},
						{
							"id": "destroy",
							"objectClass": "UpArrow",
							"sid": 260573967618943
						},
						{
							"id": "destroy",
							"objectClass": "DownArrow",
							"sid": 128319826447767
						},
						{
							"id": "destroy",
							"objectClass": "ChoiceSelector",
							"sid": 606259672886450
						},
						{
							"id": "signal",
							"objectClass": "System",
							"sid": 526724061050132,
							"parameters": {
								"tag": "\"DIALOGUE_END\""
							}
						}
					],
					"sid": 775761677063367,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "pick-by-unique-id",
									"objectClass": "PortraitSprite",
									"sid": 700128738164821,
									"parameters": {
										"unique-id": "Dialogue_PortraitUID"
									}
								}
							],
							"actions": [
								{
									"id": "destroy",
									"objectClass": "PortraitSprite",
									"sid": 117904006600739
								}
							],
							"sid": 914371962592143
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "pick-all",
									"objectClass": "System",
									"sid": 562400123067891,
									"parameters": {
										"object": "SpriteFont"
									}
								},
								{
									"id": "pick-by-comparison",
									"objectClass": "System",
									"sid": 992784129035281,
									"parameters": {
										"object": "SpriteFont",
										"expression": "left(SpriteFont.ID, 6)",
										"comparison": 0,
										"value": "\"choice\""
									}
								}
							],
							"actions": [
								{
									"id": "destroy",
									"objectClass": "SpriteFont",
									"sid": 397553757720531
								}
							],
							"sid": 668938313713997
						}
					]
				},
				{
					"functionName": "Dialogue_SetDelay",
					"functionDescription": "Change the delay between characters for the current sequence..",
					"functionCategory": "Dialogue - Config",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "delay",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"sid": 805026252765703
						}
					],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 121401058783305,
							"parameters": {
								"variable": "Dialogue_SequenceCharDelay",
								"value": "delay"
							}
						}
					],
					"sid": 673761822901496
				},
				{
					"functionName": "Dialogue_SetDefaultDelay",
					"functionDescription": "Change the default delay between each character.",
					"functionCategory": "Dialogue - Config",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "delay",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"sid": 703753026228265
						}
					],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 246186754742247,
							"parameters": {
								"variable": "DIALOGUE_DEFAULTDELAY",
								"value": "delay"
							}
						}
					],
					"sid": 614861616850078
				},
				{
					"functionName": "Dialogue_ResetDelay",
					"functionDescription": "Reset the delay to the default value.",
					"functionCategory": "Dialogue - Config",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 717993488641614,
							"parameters": {
								"variable": "Dialogue_SequenceCharDelay",
								"value": "DIALOGUE_DEFAULTDELAY"
							}
						}
					],
					"sid": 343047501834084
				},
				{
					"functionName": "Dialogue_SetX",
					"functionDescription": "Change the default dialogue box X position.",
					"functionCategory": "Dialogue - Config",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "x",
							"type": "number",
							"initialValue": "0",
							"comment": "New x position of dialogue box.",
							"sid": 179617360745425
						}
					],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 630221076766128,
							"parameters": {
								"variable": "DIALOGUE_POSITIONX",
								"value": "x"
							}
						}
					],
					"sid": 283643140182222
				},
				{
					"functionName": "Dialogue_SetY",
					"functionDescription": "Change the default dialogue box Y position.",
					"functionCategory": "Dialogue - Config",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "y",
							"type": "number",
							"initialValue": "0",
							"comment": "New y position of dialogue box.",
							"sid": 435796498424539
						}
					],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 896375975384080,
							"parameters": {
								"variable": "DIALOGUE_POSITIONY",
								"value": "y"
							}
						}
					],
					"sid": 269076070527923
				},
				{
					"functionName": "Dialogue_SetWidth",
					"functionDescription": "Change the default dialogue box width.",
					"functionCategory": "Dialogue - Config",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "width",
							"type": "number",
							"initialValue": "0",
							"comment": "New default width of dialogue box.",
							"sid": 441117515162033
						}
					],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 844494439292364,
							"parameters": {
								"variable": "DIALOGUE_WIDTH",
								"value": "width"
							}
						}
					],
					"sid": 892323151605331
				},
				{
					"functionName": "Dialogue_SetHeight",
					"functionDescription": "Change the default dialogue box height.",
					"functionCategory": "Dialogue - Config",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "height",
							"type": "number",
							"initialValue": "0",
							"comment": "New default height of dialogue box.",
							"sid": 686306520966150
						}
					],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 425205815533334,
							"parameters": {
								"variable": "DIALOGUE_HEIGHT",
								"value": "height"
							}
						}
					],
					"sid": 692610956517593
				},
				{
					"eventType": "comment",
					"text": "You can add all kind of new commands here that change the dialogue system behavior, directly affect your game world...\r\nThose few built-in commands should come in handy to add semi-advanced features to your dialogues.\r\nCommand format is : {CommandName:Param1,Param2,Param3,...}"
				},
				{
					"eventType": "group",
					"disabled": false,
					"title": "Text commands",
					"description": "",
					"isActiveOnStart": true,
					"children": [
						{
							"functionName": "Dialogue_ProcessCommand",
							"functionDescription": "",
							"functionCategory": "Dialogue - Internal",
							"functionReturnType": "none",
							"functionCopyPicked": false,
							"functionIsAsync": false,
							"functionParameters": [
								{
									"name": "commandText",
									"type": "string",
									"initialValue": "",
									"comment": "",
									"sid": 524509384379596
								}
							],
							"eventType": "function-block",
							"conditions": [],
							"actions": [],
							"sid": 653859559225140,
							"children": [
								{
									"eventType": "variable",
									"name": "command",
									"type": "string",
									"initialValue": "",
									"comment": "",
									"isStatic": false,
									"isConstant": false,
									"sid": 148814335687160
								},
								{
									"eventType": "variable",
									"name": "params",
									"type": "string",
									"initialValue": "",
									"comment": "",
									"isStatic": false,
									"isConstant": false,
									"sid": 107157709985351
								},
								{
									"eventType": "block",
									"conditions": [],
									"actions": [
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 805441410149665,
											"parameters": {
												"variable": "command",
												"value": "tokenat(commandText, 0, \":\")"
											}
										},
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 832031273356570,
											"parameters": {
												"variable": "params",
												"value": "mid(commandText, (find(commandText, command) + len(command)) + 1, (len(commandText) - len(command)) - 1)"
											}
										}
									],
									"sid": 216585409044132
								},
								{
									"eventType": "comment",
									"text": "Force user to make an input for the current sequence to continue\r\nNo parameter"
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-eventvar",
											"objectClass": "System",
											"sid": 177032516123168,
											"parameters": {
												"variable": "command",
												"comparison": 0,
												"value": "\"pause\""
											}
										}
									],
									"actions": [
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 508229396761300,
											"parameters": {
												"variable": "Dialogue_WaitForInput",
												"value": "1"
											}
										}
									],
									"sid": 511441886881566
								},
								{
									"eventType": "comment",
									"text": "Add a delay for the next character to display\r\nParam = the delay, in milleseconds"
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-eventvar",
											"objectClass": "System",
											"sid": 106853648609977,
											"parameters": {
												"variable": "command",
												"comparison": 0,
												"value": "\"wait\""
											}
										}
									],
									"actions": [
										{
											"id": "add-to-eventvar",
											"objectClass": "System",
											"sid": 212604031921410,
											"parameters": {
												"variable": "Dialogue_Timer",
												"value": "int(params)"
											}
										}
									],
									"sid": 875413744465625
								},
								{
									"eventType": "comment",
									"text": "Set the character delay for the current sequence\r\nParam = the delay, in milleseconds"
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-eventvar",
											"objectClass": "System",
											"sid": 322455472232211,
											"parameters": {
												"variable": "command",
												"comparison": 0,
												"value": "\"setdelay\""
											}
										}
									],
									"actions": [
										{
											"callFunction": "Dialogue_SetDelay",
											"sid": 905513992834439,
											"parameters": [
												"int(params)"
											]
										}
									],
									"sid": 186943680733737
								},
								{
									"eventType": "comment",
									"text": "Reset the character delay for the current sequence to the default value\nNo parameter"
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-eventvar",
											"objectClass": "System",
											"sid": 216665028822896,
											"parameters": {
												"variable": "command",
												"comparison": 0,
												"value": "\"resetdelay\""
											}
										}
									],
									"actions": [
										{
											"callFunction": "Dialogue_ResetDelay",
											"sid": 980301941789350
										}
									],
									"sid": 657276719376504
								},
								{
									"eventType": "comment",
									"text": "Automatically skip current sequence and go to the next. Use it at the end of a sequence, coupled with a wait command just before so the user can read. (Perfect for cutscene)\r\nNo parameter"
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-eventvar",
											"objectClass": "System",
											"sid": 739907775354929,
											"parameters": {
												"variable": "command",
												"comparison": 0,
												"value": "\"next\""
											}
										}
									],
									"actions": [
										{
											"id": "add-to-eventvar",
											"objectClass": "System",
											"sid": 420374786906616,
											"parameters": {
												"variable": "Dialogue_SequenceIndex",
												"value": "1"
											}
										}
									],
									"sid": 826279555849254,
									"children": [
										{
											"eventType": "comment",
											"text": "Start next sequence in the dialogue"
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-eventvar",
													"objectClass": "System",
													"sid": 529465112373376,
													"parameters": {
														"variable": "Dialogue_SequenceIndex",
														"comparison": 2,
														"value": "DialogueData.Width"
													}
												}
											],
											"actions": [
												{
													"callFunction": "Dialogue_StartSequence",
													"sid": 566471331585217,
													"parameters": [
														"Dialogue_SequenceIndex"
													]
												}
											],
											"sid": 141584967361760
										},
										{
											"eventType": "comment",
											"text": "Dialogue ends here"
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 700999930866683
												}
											],
											"actions": [
												{
													"callFunction": "Dialogue_End",
													"sid": 204043612147659
												}
											],
											"sid": 733002823644453
										}
									]
								},
								{
									"eventType": "comment",
									"text": "End the current dialogue. Useful in a multiple forks dialogue.\r\nNo parameter"
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-eventvar",
											"objectClass": "System",
											"sid": 890575157932169,
											"parameters": {
												"variable": "command",
												"comparison": 0,
												"value": "\"end\""
											}
										}
									],
									"actions": [
										{
											"callFunction": "Dialogue_End",
											"sid": 308256052822471
										}
									],
									"sid": 209436329943554
								},
								{
									"eventType": "comment",
									"text": "Play a sound file\r\nParam1 = the sound filename without extension\r\nParam2 = tag"
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-eventvar",
											"objectClass": "System",
											"sid": 354038279061684,
											"parameters": {
												"variable": "command",
												"comparison": 0,
												"value": "\"playsound\""
											}
										}
									],
									"actions": [
										{
											"id": "play-by-name",
											"objectClass": "Audio",
											"sid": 717851145710567,
											"parameters": {
												"folder": "sounds",
												"audio-file-name": "tokenat(params, 0, \",\")",
												"loop": "not-looping",
												"volume": "0",
												"stereo-pan": "0",
												"tag-optional": "tokenat(params, 1, \",\")"
											}
										}
									],
									"sid": 137176547409360
								},
								{
									"eventType": "comment",
									"text": "Play a looping music file\r\nParam1 = the music filename without extension\r\nParam2 = tag"
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-eventvar",
											"objectClass": "System",
											"sid": 560196479126477,
											"parameters": {
												"variable": "command",
												"comparison": 0,
												"value": "\"playmusic\""
											}
										}
									],
									"actions": [],
									"sid": 730516031872609,
									"children": [
										{
											"eventType": "comment",
											"text": "First, stop the music if tag is already playing and call the fade function to reset it so it won't fade the newly playing music. Ideally, the fade function should have a dictionnary that keeps track of which tags are fading, but it's doubtful that more than one music at a time will play."
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "is-tag-playing",
													"objectClass": "Audio",
													"sid": 575924960853648,
													"parameters": {
														"tag": "tokenat(params, 1, \",\")"
													}
												}
											],
											"actions": [
												{
													"id": "stop",
													"objectClass": "Audio",
													"sid": 827562681372620,
													"parameters": {
														"tag": "tokenat(params, 1, \",\")"
													}
												},
												{
													"callFunction": "Dialogue_FadeMusicTag",
													"sid": 817573809209423,
													"parameters": [
														"tokenat(params, 1, \",\")",
														"-1"
													]
												}
											],
											"sid": 585994188015724
										},
										{
											"eventType": "block",
											"conditions": [],
											"actions": [
												{
													"id": "play-by-name",
													"objectClass": "Audio",
													"sid": 537585636103775,
													"parameters": {
														"folder": "music",
														"audio-file-name": "tokenat(params, 0, \",\")",
														"loop": "looping",
														"volume": "0",
														"stereo-pan": "0",
														"tag-optional": "tokenat(params, 1, \",\")"
													}
												}
											],
											"sid": 466840483692801
										}
									]
								},
								{
									"eventType": "comment",
									"text": "Fade out a music tag\r\nParam1 = tag to fade\r\nParam2 = duration in ms"
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-eventvar",
											"objectClass": "System",
											"sid": 876426443212681,
											"parameters": {
												"variable": "command",
												"comparison": 0,
												"value": "\"fademusic\""
											}
										}
									],
									"actions": [],
									"sid": 786875208043071,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "is-tag-playing",
													"objectClass": "Audio",
													"sid": 868834115912561,
													"parameters": {
														"tag": "tokenat(params, 0, \",\")"
													}
												}
											],
											"actions": [
												{
													"callFunction": "Dialogue_FadeMusicTag",
													"sid": 580030911350603,
													"parameters": [
														"tokenat(params, 0, \",\")",
														"int(tokenat(params, 1, \",\"))"
													]
												}
											],
											"sid": 197843400197144
										}
									]
								},
								{
									"eventType": "comment",
									"text": "Change portrait (only work if portrait is shown)\r\nParam1 = new animation name\r\nParam2 = new animation frame"
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-eventvar",
											"objectClass": "System",
											"sid": 931974906044105,
											"parameters": {
												"variable": "command",
												"comparison": 0,
												"value": "\"changeportrait\""
											}
										}
									],
									"actions": [],
									"sid": 367146870858806,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "pick-by-unique-id",
													"objectClass": "PortraitSprite",
													"sid": 558782057871991,
													"parameters": {
														"unique-id": "Dialogue_PortraitUID"
													}
												}
											],
											"actions": [],
											"sid": 527768826943501,
											"children": [
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "compare-two-values",
															"objectClass": "System",
															"sid": 101392475051118,
															"parameters": {
																"first-value": "tokencount(params, \",\")",
																"comparison": 0,
																"second-value": "1"
															}
														}
													],
													"actions": [
														{
															"id": "set-animation",
															"objectClass": "PortraitSprite",
															"sid": 730539567942774,
															"parameters": {
																"animation": "params",
																"from": "beginning"
															}
														}
													],
													"sid": 868955394411719
												},
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "else",
															"objectClass": "System",
															"sid": 628644897228548
														},
														{
															"id": "compare-two-values",
															"objectClass": "System",
															"sid": 372186782227414,
															"parameters": {
																"first-value": "tokencount(params, \",\")",
																"comparison": 0,
																"second-value": "2"
															}
														}
													],
													"actions": [
														{
															"id": "set-animation",
															"objectClass": "PortraitSprite",
															"sid": 616446014453337,
															"parameters": {
																"animation": "tokenat(params, 0, \",\")",
																"from": "beginning"
															}
														},
														{
															"id": "set-animation-frame",
															"objectClass": "PortraitSprite",
															"sid": 713848364654478,
															"parameters": {
																"frame-number": "int(tokenat(params, 1, \",\"))"
															}
														}
													],
													"sid": 943208622744703
												}
											]
										}
									]
								},
								{
									"eventType": "comment",
									"text": "Fork the current dialogue sequence into two possible path. Can fork inside the current dialogue or start a new one.\r\nParam1 = expression used to fork. Use the \"GameVariables\" dictionary for dynamic values. ex: {#goldAmount} >= 50. It will be evaluated with javascript \"eval\" function, so use valid javascript syntax. String litterals should be double quoted, and not containing any comma. String coming from the \"GameVariables\" dictionary should also be quoted. ex: \"{#playerName}\" == \"Zelda\".\r\nParam2 = path if true, use a number to fork to another sequence index, or use a name to fork to a new dialogue. (A numeric value lesser or equal to 0 or an empty string will end the dialogue)\r\nParam3 = path if false, use a number to fork to another sequence index, or use a name to fork to a new dialogue. (A numeric value lesser or equal to 0 or an empty string will end the dialogue)"
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-eventvar",
											"objectClass": "System",
											"sid": 126693491906857,
											"parameters": {
												"variable": "command",
												"comparison": 0,
												"value": "\"fork\""
											}
										}
									],
									"actions": [],
									"sid": 648237981050707,
									"children": [
										{
											"eventType": "variable",
											"name": "eval",
											"type": "number",
											"initialValue": "0",
											"comment": "",
											"isStatic": false,
											"isConstant": false,
											"sid": 684077160188459
										},
										{
											"eventType": "variable",
											"name": "forkUsed",
											"type": "string",
											"initialValue": "",
											"comment": "",
											"isStatic": false,
											"isConstant": false,
											"sid": 328575081263499
										},
										{
											"eventType": "block",
											"conditions": [],
											"actions": [
												{
													"id": "set-eventvar-value",
													"objectClass": "System",
													"sid": 267594306887056,
													"parameters": {
														"variable": "eval",
														"value": "Browser.ExecJS(\"eval('\" & trim(tokenat(params, 0, \",\")) & \";');\")"
													}
												}
											],
											"sid": 616007547776626
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-eventvar",
													"objectClass": "System",
													"sid": 626634492443070,
													"parameters": {
														"variable": "eval",
														"comparison": 1,
														"value": "0"
													}
												}
											],
											"actions": [
												{
													"id": "set-eventvar-value",
													"objectClass": "System",
													"sid": 469576466874940,
													"parameters": {
														"variable": "forkUsed",
														"value": "trim(tokenat(params, 1, \",\"))"
													}
												}
											],
											"sid": 953836781574618
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 783022718724596
												}
											],
											"actions": [
												{
													"id": "set-eventvar-value",
													"objectClass": "System",
													"sid": 543539595622670,
													"parameters": {
														"variable": "forkUsed",
														"value": "trim(tokenat(params, 2, \",\"))"
													}
												}
											],
											"sid": 177604380419937
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "is-number-nan",
													"objectClass": "System",
													"sid": 503711189860186,
													"parameters": {
														"number": "forkUsed"
													},
													"isInverted": true
												},
												{
													"id": "compare-eventvar",
													"objectClass": "System",
													"sid": 315976355329593,
													"parameters": {
														"variable": "forkUsed",
														"comparison": 0,
														"value": "\"\""
													}
												}
											],
											"actions": [],
											"sid": 234825722135891,
											"children": [
												{
													"eventType": "comment",
													"text": "Dialogue ends here"
												},
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "compare-eventvar",
															"objectClass": "System",
															"sid": 972693240209667,
															"parameters": {
																"variable": "forkUsed",
																"comparison": 3,
																"value": "\"0\""
															}
														}
													],
													"actions": [
														{
															"callFunction": "Dialogue_End",
															"sid": 194039847966673
														}
													],
													"sid": 758389643083208
												},
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "else",
															"objectClass": "System",
															"sid": 852007699133024
														}
													],
													"actions": [
														{
															"id": "set-eventvar-value",
															"objectClass": "System",
															"sid": 283321327065713,
															"parameters": {
																"variable": "Dialogue_SequenceIndex",
																"value": "int(forkUsed)-1"
															}
														}
													],
													"sid": 958118675243192,
													"children": [
														{
															"eventType": "comment",
															"text": "Start next sequence in the dialogue"
														},
														{
															"eventType": "block",
															"conditions": [
																{
																	"id": "compare-eventvar",
																	"objectClass": "System",
																	"sid": 814958887314999,
																	"parameters": {
																		"variable": "Dialogue_SequenceIndex",
																		"comparison": 2,
																		"value": "DialogueData.Width"
																	}
																}
															],
															"actions": [
																{
																	"callFunction": "Dialogue_StartSequence",
																	"sid": 370718959081323,
																	"parameters": [
																		"Dialogue_SequenceIndex"
																	]
																}
															],
															"sid": 483156058363205
														},
														{
															"eventType": "comment",
															"text": "Dialogue ends here"
														},
														{
															"eventType": "block",
															"conditions": [
																{
																	"id": "else",
																	"objectClass": "System",
																	"sid": 598256002650763
																}
															],
															"actions": [
																{
																	"callFunction": "Dialogue_End",
																	"sid": 936335781571109
																}
															],
															"sid": 154018180977706
														}
													]
												}
											],
											"isOrBlock": true
										},
										{
											"eventType": "comment",
											"text": "Start a new a dialogue if key exists"
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 363215369937627
												},
												{
													"id": "has-key",
													"objectClass": "DialogueDictionary",
													"sid": 541894031683250,
													"parameters": {
														"key": "forkUsed"
													}
												}
											],
											"actions": [
												{
													"callFunction": "Dialogue_End",
													"sid": 805891410442543
												},
												{
													"callFunction": "Dialogue_StartDialogue",
													"sid": 489871646618001,
													"parameters": [
														"forkUsed"
													]
												}
											],
											"sid": 441542679261023
										},
										{
											"eventType": "comment",
											"text": "Otherwise end"
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 500978236911525
												}
											],
											"actions": [
												{
													"callFunction": "Dialogue_End",
													"sid": 814549889234868
												}
											],
											"sid": 543036540546449
										}
									]
								},
								{
									"eventType": "comment",
									"text": "Offer a choice of input to the user. Dialogue will fork according to the choice selected.\r\nOne parameter per choice. If you need commas in your texts, escape them with a backslash (like this : \\, ). \r\nEvery parameter needs to end with ::\"fork options\" with \"fork options\" being a number to fork to another sequence index, or a name to fork to a new dialogue. (A numeric value lesser or equal to 0 or an empty string will end the dialogue) ex: {choice:Yes::saidYes,No::saidNo} -> Selecting the \"Yes\" choice would make me fork to the \"saidYes\" dialogue"
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-eventvar",
											"objectClass": "System",
											"sid": 127353027330218,
											"parameters": {
												"variable": "command",
												"comparison": 0,
												"value": "\"choice\""
											}
										}
									],
									"actions": [
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 626510360255019,
											"parameters": {
												"variable": "Dialogue_WaitForChoice",
												"value": "1"
											}
										},
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 249938298269086,
											"parameters": {
												"variable": "Dialogue_ChoiceIndex",
												"value": "0"
											}
										}
									],
									"sid": 909613402097075,
									"children": [
										{
											"eventType": "variable",
											"name": "offset",
											"type": "number",
											"initialValue": "0",
											"comment": "",
											"isStatic": false,
											"isConstant": false,
											"sid": 693630381241848
										},
										{
											"eventType": "variable",
											"name": "escapedChoice",
											"type": "string",
											"initialValue": "",
											"comment": "",
											"isStatic": false,
											"isConstant": false,
											"sid": 980461657016568
										},
										{
											"eventType": "block",
											"conditions": [],
											"actions": [
												{
													"id": "set-eventvar-value",
													"objectClass": "System",
													"sid": 202758978562819,
													"parameters": {
														"variable": "escapedChoice",
														"value": "replace(params, \"\\,\", \"\\___\")"
													}
												}
											],
											"sid": 952609767441842
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "repeat",
													"objectClass": "System",
													"sid": 668453110528282,
													"parameters": {
														"count": "tokencount(escapedChoice, \",\")"
													}
												}
											],
											"actions": [
												{
													"id": "create-object",
													"objectClass": "System",
													"sid": 538461353653236,
													"parameters": {
														"object-to-create": "SpriteFont",
														"layer": "DIALOGUE_LAYER",
														"x": "DIALOGUE_POSITIONX + DIALOGUE_MARGIN + (DialogueData.At(Dialogue_SequenceIndex, 1) = 1 ? DIALOGUE_PORTRAITWIDTH + DIALOGUE_MARGIN : 0)",
														"y": "DIALOGUE_POSITIONY + DIALOGUE_MARGIN + offset",
														"create-hierarchy": false,
														"template-name": "\"\""
													}
												},
												{
													"id": "set-instvar-value",
													"objectClass": "SpriteFont",
													"sid": 435652728744554,
													"parameters": {
														"instance-variable": "ID",
														"value": "\"choice\" & loopindex"
													}
												},
												{
													"id": "set-instvar-value",
													"objectClass": "SpriteFont",
													"sid": 373353061770983,
													"parameters": {
														"instance-variable": "choiceFork",
														"value": "trim(tokenat(replace(trim(tokenat(escapedChoice, loopindex, \",\")), \"\\___\", \",\"), 1, \"::\"))"
													}
												},
												{
													"id": "set-text",
													"objectClass": "SpriteFont",
													"sid": 409205603053289,
													"parameters": {
														"text": "trim(tokenat(replace(trim(tokenat(escapedChoice, loopindex, \",\")), \"\\___\", \",\"), 0, \"::\"))"
													}
												},
												{
													"id": "set-size",
													"objectClass": "SpriteFont",
													"sid": 444265746828102,
													"parameters": {
														"width": "DIALOGUE_WIDTH - DIALOGUE_MARGIN * 2 - DIALOGUE_ARROWSIZE * 2 - (DialogueData.At(Dialogue_SequenceIndex, 1) = 1 ? DIALOGUE_PORTRAITWIDTH + DIALOGUE_MARGIN : 0)",
														"height": "min(Self.TextHeight, DIALOGUE_HEIGHT - DIALOGUE_MARGIN * 2)"
													}
												},
												{
													"id": "set-visible",
													"objectClass": "SpriteFont",
													"sid": 603410473890834,
													"parameters": {
														"visibility": "invisible"
													}
												},
												{
													"id": "add-to-eventvar",
													"objectClass": "System",
													"sid": 281551294367427,
													"parameters": {
														"variable": "offset",
														"value": "SpriteFont.TextHeight + DIALOGUE_LINEHEIGHT"
													}
												}
											],
											"sid": 587892166436474
										}
									]
								},
								{
									"eventType": "comment",
									"text": "Set a value inside the GameVariables dictionary\r\nParam1 = Key of the value to set\r\nParam2 = The value to set the key to\r\nParam3 (optional) = Operation to do on the value (must be numeric), if omitted, value will be SET. Possible values are : + - * /"
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-eventvar",
											"objectClass": "System",
											"sid": 848131376397529,
											"parameters": {
												"variable": "command",
												"comparison": 0,
												"value": "\"setvalue\""
											}
										}
									],
									"actions": [],
									"sid": 865983883038568,
									"children": [
										{
											"eventType": "variable",
											"name": "value",
											"type": "string",
											"initialValue": "",
											"comment": "",
											"isStatic": false,
											"isConstant": false,
											"sid": 266922822962968
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-two-values",
													"objectClass": "System",
													"sid": 534197658527234,
													"parameters": {
														"first-value": "tokencount(params, \",\")",
														"comparison": 0,
														"second-value": "2"
													}
												}
											],
											"actions": [
												{
													"id": "add-key",
													"objectClass": "GameVariables",
													"sid": 339263263542597,
													"parameters": {
														"key": "tokenat(params, 0, \",\")",
														"value": "tokenat(params, 1, \",\")"
													}
												}
											],
											"sid": 855824845169024
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-two-values",
													"objectClass": "System",
													"sid": 604473443975397,
													"parameters": {
														"first-value": "tokencount(params, \",\")",
														"comparison": 0,
														"second-value": "3"
													}
												},
												{
													"id": "has-key",
													"objectClass": "GameVariables",
													"sid": 830874210918492,
													"parameters": {
														"key": "tokenat(params, 0, \",\")"
													}
												}
											],
											"actions": [
												{
													"id": "set-eventvar-value",
													"objectClass": "System",
													"sid": 319578653191170,
													"parameters": {
														"variable": "value",
														"value": "tokenat(params, 1, \",\")"
													}
												}
											],
											"sid": 716267193481116,
											"children": [
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "is-number-nan",
															"objectClass": "System",
															"sid": 763476968332741,
															"parameters": {
																"number": "value"
															},
															"isInverted": true
														}
													],
													"actions": [],
													"sid": 248975309081441,
													"children": [
														{
															"eventType": "block",
															"conditions": [
																{
																	"id": "compare-two-values",
																	"objectClass": "System",
																	"sid": 779302377771959,
																	"parameters": {
																		"first-value": "tokenat(params, 2, \",\")",
																		"comparison": 0,
																		"second-value": "\"+\""
																	}
																}
															],
															"actions": [
																{
																	"id": "set-key",
																	"objectClass": "GameVariables",
																	"sid": 233568299203688,
																	"parameters": {
																		"key": "tokenat(params, 0, \",\")",
																		"value": "float(GameVariables.Get(tokenat(params, 0, \",\"))) + float(tokenat(params, 1, \",\"))"
																	}
																}
															],
															"sid": 931266181629077
														},
														{
															"eventType": "block",
															"conditions": [
																{
																	"id": "compare-two-values",
																	"objectClass": "System",
																	"sid": 230070323807092,
																	"parameters": {
																		"first-value": "tokenat(params, 2, \",\")",
																		"comparison": 0,
																		"second-value": "\"-\""
																	}
																}
															],
															"actions": [
																{
																	"id": "set-key",
																	"objectClass": "GameVariables",
																	"sid": 542624646446365,
																	"parameters": {
																		"key": "tokenat(params, 0, \",\")",
																		"value": "float(GameVariables.Get(tokenat(params, 0, \",\"))) - float(tokenat(params, 1, \",\"))"
																	}
																}
															],
															"sid": 310016322069326
														},
														{
															"eventType": "block",
															"conditions": [
																{
																	"id": "compare-two-values",
																	"objectClass": "System",
																	"sid": 243852732898169,
																	"parameters": {
																		"first-value": "tokenat(params, 2, \",\")",
																		"comparison": 0,
																		"second-value": "\"*\""
																	}
																}
															],
															"actions": [
																{
																	"id": "set-key",
																	"objectClass": "GameVariables",
																	"sid": 770238360957967,
																	"parameters": {
																		"key": "tokenat(params, 0, \",\")",
																		"value": "float(GameVariables.Get(tokenat(params, 0, \",\"))) * float(tokenat(params, 1, \",\"))"
																	}
																}
															],
															"sid": 212256252197958
														},
														{
															"eventType": "block",
															"conditions": [
																{
																	"id": "compare-two-values",
																	"objectClass": "System",
																	"sid": 715947680164377,
																	"parameters": {
																		"first-value": "tokenat(params, 2, \",\")",
																		"comparison": 0,
																		"second-value": "\"/\""
																	}
																}
															],
															"actions": [
																{
																	"id": "set-key",
																	"objectClass": "GameVariables",
																	"sid": 238606945654870,
																	"parameters": {
																		"key": "tokenat(params, 0, \",\")",
																		"value": "float(GameVariables.Get(tokenat(params, 0, \",\"))) / float(tokenat(params, 1, \",\"))"
																	}
																}
															],
															"sid": 213468230582219
														}
													]
												}
											]
										}
									]
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-eventvar",
											"objectClass": "System",
											"sid": 900149065544647,
											"parameters": {
												"variable": "command",
												"comparison": 0,
												"value": "\"run\""
											}
										}
									],
									"actions": [],
									"sid": 185357240567389,
									"children": [
										{
											"eventType": "variable",
											"name": "value",
											"type": "string",
											"initialValue": "",
											"comment": "",
											"isStatic": false,
											"isConstant": false,
											"sid": 800416796722956
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-two-values",
													"objectClass": "System",
													"sid": 265612827981823,
													"parameters": {
														"first-value": "tokencount(params, \",\")",
														"comparison": 0,
														"second-value": "1"
													}
												}
											],
											"actions": [
												{
													"id": "set-eventvar-value",
													"objectClass": "System",
													"sid": 145527035130187,
													"parameters": {
														"variable": "temp",
														"value": "params"
													}
												},
												{
													"type": "script",
													"script": "var value =runtime.globalVars.temp\n_configExecutor(value)"
												}
											],
											"sid": 832834262327695
										}
									]
								}
							]
						}
					],
					"sid": 485264365608620
				}
			],
			"sid": 191195825105674
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Opt",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-signal",
							"objectClass": "System",
							"sid": 597127150693392,
							"parameters": {
								"tag": "\"DIALOGUE_END\""
							}
						}
					],
					"actions": [
						{
							"type": "script",
							"script": "const event = new C3.Event(\"dialogue_end\", false)\nconst handler =runtime.objects.EventHandler.getFirstInstance();\nhandler.dispatchEvent(event)\n"
						}
					],
					"sid": 546928991469099
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-signal",
							"objectClass": "System",
							"sid": 462800392349115,
							"parameters": {
								"tag": "\"DIALOGUE_ISTYPEING\""
							}
						}
					],
					"actions": [],
					"sid": 563225593847911,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "every-x-seconds",
									"objectClass": "System",
									"sid": 606767052491658,
									"parameters": {
										"interval-seconds": "0.1"
									}
								}
							],
							"actions": [
								{
									"id": "play",
									"objectClass": "Audio",
									"sid": 922115657016397,
									"parameters": {
										"audio-file": "sfx_type",
										"loop": "not-looping",
										"volume": "-15",
										"stereo-pan": "0",
										"tag-optional": "\"\""
									}
								}
							],
							"sid": 561090734341037
						}
					]
				}
			],
			"sid": 767286695760611
		}
	],
	"sid": 449144648223835
}